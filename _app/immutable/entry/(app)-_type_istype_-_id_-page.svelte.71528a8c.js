import{S as nt,i as st,s as it,w as te,H as le,k as q,a as N,q as F,y as X,l as P,m as T,c as R,h as _,r as J,z as x,n as H,p as dt,b as E,C as D,A as Y,E as ee,J as ue,g as K,u as ie,v as re,d as z,f as ae,O as ne,R as pt,B as Z,F as ot,T as ht,a6 as mt,o as rt,X as vt,P as _e,Z as oe,a2 as qe,V as De,Q as at,Y as gt,a1 as he,e as Ie,x as Se,a9 as bt,a0 as $t,U as kt}from"../chunks/index.d989938f.js";import{R as ge,F as ke,H as He,t as Te}from"../chunks/store.30f84466.js";import{M as Ve,u as wt,b as we,a as Ee,P as de}from"../chunks/settings.052d06d7.js";import{s as se,P as pe,b as Et,T as Pe}from"../chunks/ProInput.50bce994.js";function Ne(n,e,t){const l=n.slice();return l[44]=e[t],l}function Re(n,e,t){const l=n.slice();return l[47]=e[t],l}function Me(n,e,t){const l=n.slice();return l[50]=e[t],l}function ye(n,e,t){const l=n.slice();return l[53]=e[t],l[54]=e,l[55]=t,l}function Le(n,e,t){const l=n.slice();return l[56]=e[t],l[57]=e,l[58]=t,l}function It(n){let e,t,l;return{c(){e=q("span"),t=F("expand_less"),this.h()},l(i){e=P(i,"SPAN",{class:!0});var s=T(e);t=J(s,"expand_less"),s.forEach(_),this.h()},h(){H(e,"class","material-symbols-rounded svelte-crwhqu")},m(i,s){E(i,e,s),D(e,t)},i(i){i&&(l||_e(()=>{l=at(e,n[14],{duration:400}),l.start()}))},o:qe,d(i){i&&_(e)}}}function Ct(n){let e,t,l;return{c(){e=q("span"),t=F("expand_more"),this.h()},l(i){e=P(i,"SPAN",{class:!0});var s=T(e);t=J(s,"expand_more"),s.forEach(_),this.h()},h(){H(e,"class","material-symbols-rounded svelte-crwhqu")},m(i,s){E(i,e,s),D(e,t)},i(i){i&&(l||_e(()=>{l=at(e,n[14],{duration:400}),l.start()}))},o:qe,d(i){i&&_(e)}}}function Oe(n){let e,t,l,i,s,r,u,a,c,o,h=[],d=new Map,w,C,M,y,j,m=n[0].components;const W=V=>V[56].id;for(let V=0;V<m.length;V+=1){let p=Le(n,m,V),$=W(p);d.set($,h[V]=Ke($,p))}let I=n[0].isParent&&We(n);return{c(){e=q("div"),t=q("div"),l=F("content_copy"),s=N(),r=q("div"),u=F("delete"),c=N(),o=q("div");for(let V=0;V<h.length;V+=1)h[V].c();w=N(),I&&I.c(),this.h()},l(V){e=P(V,"DIV",{class:!0});var p=T(e);t=P(p,"DIV",{class:!0,title:!0});var $=T(t);l=J($,"content_copy"),$.forEach(_),s=R(p),r=P(p,"DIV",{class:!0,title:!0});var A=T(r);u=J(A,"delete"),A.forEach(_),p.forEach(_),c=R(V),o=P(V,"DIV",{class:!0});var g=T(o);for(let f=0;f<h.length;f+=1)h[f].l(g);w=R(g),I&&I.l(g),g.forEach(_),this.h()},h(){H(t,"class","material-symbols-rounded control copy svelte-crwhqu"),H(t,"title","Copy"),H(r,"class","material-symbols-rounded control delete svelte-crwhqu"),H(r,"title","Delete"),H(e,"class","controls svelte-crwhqu"),H(o,"class","children svelte-crwhqu")},m(V,p){E(V,e,p),D(e,t),D(t,l),D(e,s),D(e,r),D(r,u),E(V,c,p),E(V,o,p);for(let $=0;$<h.length;$+=1)h[$]&&h[$].m(o,null);D(o,w),I&&I.m(o,null),M=!0,y||(j=[ee(t,"click",ue(n[19])),ee(r,"click",ue(n[20]))],y=!0)},p(V,p){p[0]&3&&(m=V[0].components,re(),h=vt(h,p,W,1,V,m,d,o,gt,Ke,w,Le),ae()),V[0].isParent?I?I.p(V,p):(I=We(V),I.c(),I.m(o,null)):I&&(I.d(1),I=null)},i(V){if(!M){_e(()=>{M&&(i||(i=oe(t,se,{},!0)),i.run(1))}),_e(()=>{M&&(a||(a=oe(r,se,{},!0)),a.run(1))});for(let p=0;p<m.length;p+=1)K(h[p]);V&&_e(()=>{M&&(C||(C=oe(o,se,{},!0)),C.run(1))}),M=!0}},o(V){i||(i=oe(t,se,{},!1)),i.run(0),a||(a=oe(r,se,{},!1)),a.run(0);for(let p=0;p<h.length;p+=1)z(h[p]);V&&(C||(C=oe(o,se,{},!1)),C.run(0)),M=!1},d(V){V&&_(e),V&&i&&i.end(),V&&a&&a.end(),V&&_(c),V&&_(o);for(let p=0;p<h.length;p+=1)h[p].d();I&&I.d(),V&&C&&C.end(),y=!1,ot(j)}}}function Ke(n,e){let t,l,i,s,r;function u(c){e[21](c,e[56],e[57],e[58])}let a={skill:e[1]};return e[56]!==void 0&&(a.component=e[56]),l=new ft({props:a}),te.push(()=>le(l,"component",u)),l.$on("update",e[22]),l.$on("save",e[23]),{key:n,first:null,c(){t=q("span"),X(l.$$.fragment),this.h()},l(c){t=P(c,"SPAN",{});var o=T(t);x(l.$$.fragment,o),o.forEach(_),this.h()},h(){this.first=t},m(c,o){E(c,t,o),Y(l,t,null),r=!0},p(c,o){e=c;const h={};o[0]&2&&(h.skill=e[1]),!i&&o[0]&1&&(i=!0,h.component=e[56],ne(()=>i=!1)),l.$set(h)},i(c){r||(K(l.$$.fragment,c),c&&_e(()=>{r&&(s||(s=oe(t,se,{},!0)),s.run(1))}),r=!0)},o(c){z(l.$$.fragment,c),c&&(s||(s=oe(t,se,{},!1)),s.run(0)),r=!1},d(c){c&&_(t),Z(l),c&&s&&s.end()}}}function We(n){let e,t,l,i;return{c(){e=q("div"),t=F("+ Add Component"),this.h()},l(s){e=P(s,"DIV",{class:!0});var r=T(e);t=J(r,"+ Add Component"),r.forEach(_),this.h()},h(){H(e,"class","chip svelte-crwhqu")},m(s,r){E(s,e,r),D(e,t),l||(i=ee(e,"click",ue(n[24])),l=!0)},p:qe,d(s){s&&_(e),l=!1,i()}}}function je(n){let e,t=n[0].description+"",l;return{c(){e=q("div"),l=F(t),this.h()},l(i){e=P(i,"DIV",{class:!0});var s=T(e);l=J(s,t),s.forEach(_),this.h()},h(){H(e,"class","modal-desc svelte-crwhqu")},m(i,s){E(i,e,s),D(e,l)},p(i,s){s[0]&1&&t!==(t=i[0].description+"")&&ie(l,t)},d(i){i&&_(e)}}}function Dt(n){let e,t,l;function i(r){n[30](r)}let s={label:"Icon Key",tooltip:'The key used by the component in the Icon Lore. If this is set to "example" and has a value name of "value", it can be referenced using the string "{attr:example.value}"'};return n[0].iconKey!==void 0&&(s.value=n[0].iconKey),e=new pe({props:s}),te.push(()=>le(e,"value",i)),{c(){X(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,u){Y(e,r,u),l=!0},p(r,u){const a={};!t&&u[0]&1&&(t=!0,a.value=r[0].iconKey,ne(()=>t=!1)),e.$set(a)},i(r){l||(K(e.$$.fragment,r),l=!0)},o(r){z(e.$$.fragment,r),l=!1},d(r){Z(e,r)}}}function Vt(n){let e,t,l,i;return e=new pe({props:{label:"Mana",tooltip:"Whether this trigger requires the mana cost to activate",$$slots:{default:[qt]},$$scope:{ctx:n}}}),l=new pe({props:{label:"Cooldown",tooltip:"Whether this trigger requires to be off cooldown to activate",$$slots:{default:[Pt]},$$scope:{ctx:n}}}),{c(){X(e.$$.fragment),t=N(),X(l.$$.fragment)},l(s){x(e.$$.fragment,s),t=R(s),x(l.$$.fragment,s)},m(s,r){Y(e,s,r),E(s,t,r),Y(l,s,r),i=!0},p(s,r){const u={};r[0]&1|r[1]&268435456&&(u.$$scope={dirty:r,ctx:s}),e.$set(u);const a={};r[0]&1|r[1]&268435456&&(a.$$scope={dirty:r,ctx:s}),l.$set(a)},i(s){i||(K(e.$$.fragment,s),K(l.$$.fragment,s),i=!0)},o(s){z(e.$$.fragment,s),z(l.$$.fragment,s),i=!1},d(s){Z(e,s),s&&_(t),Z(l,s)}}}function qt(n){let e,t,l;function i(r){n[28](r)}let s={};return n[0].mana!==void 0&&(s.data=n[0].mana),e=new Pe({props:s}),te.push(()=>le(e,"data",i)),{c(){X(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,u){Y(e,r,u),l=!0},p(r,u){const a={};!t&&u[0]&1&&(t=!0,a.data=r[0].mana,ne(()=>t=!1)),e.$set(a)},i(r){l||(K(e.$$.fragment,r),l=!0)},o(r){z(e.$$.fragment,r),l=!1},d(r){Z(e,r)}}}function Pt(n){let e,t,l;function i(r){n[29](r)}let s={};return n[0].cooldown!==void 0&&(s.data=n[0].cooldown),e=new Pe({props:s}),te.push(()=>le(e,"data",i)),{c(){X(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,u){Y(e,r,u),l=!0},p(r,u){const a={};!t&&u[0]&1&&(t=!0,a.data=r[0].cooldown,ne(()=>t=!1)),e.$set(a)},i(r){l||(K(e.$$.fragment,r),l=!0)},o(r){z(e.$$.fragment,r),l=!1},d(r){Z(e,r)}}}function ze(n){let e,t;return e=new pe({props:{label:"Counts as Cast",tooltip:'Whether this mechanic running treats the skill as "casted" and will consume mana and start the cooldown. Set to false if it is a mechanic applled when the skill fails such as cleanup or an error message"',$$slots:{default:[At]},$$scope:{ctx:n}}}),{c(){X(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,i){Y(e,l,i),t=!0},p(l,i){const s={};i[0]&1|i[1]&268435456&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){t||(K(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){Z(e,l)}}}function At(n){let e,t,l;function i(r){n[31](r)}let s={};return n[0].countsAsCast!==void 0&&(s.data=n[0].countsAsCast),e=new Pe({props:s}),te.push(()=>le(e,"data",i)),{c(){X(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,u){Y(e,r,u),l=!0},p(r,u){const a={};!t&&u[0]&1&&(t=!0,a.data=r[0].countsAsCast,ne(()=>t=!1)),e.$set(a)},i(r){l||(K(e.$$.fragment,r),l=!0)},o(r){z(e.$$.fragment,r),l=!1},d(r){Z(e,r)}}}function Be(n){let e,t,l,i;function s(a){n[32](a,n[53])}var r=n[53].component;function u(a){let c={name:a[53].name,tooltip:a[53].tooltip,multiple:a[53].multiple};return a[53].data!==void 0&&(c.data=a[53].data),{props:c}}return r&&(e=Se(r,u(n)),te.push(()=>le(e,"data",s)),e.$on("save",n[33])),{c(){e&&X(e.$$.fragment),l=Ie()},l(a){e&&x(e.$$.fragment,a),l=Ie()},m(a,c){e&&Y(e,a,c),E(a,l,c),i=!0},p(a,c){n=a;const o={};if(c[0]&1&&(o.name=n[53].name),c[0]&1&&(o.tooltip=n[53].tooltip),c[0]&1&&(o.multiple=n[53].multiple),!t&&c[0]&1&&(t=!0,o.data=n[53].data,ne(()=>t=!1)),c[0]&1&&r!==(r=n[53].component)){if(e){re();const h=e;z(h.$$.fragment,1,0,()=>{Z(h,1)}),ae()}r?(e=Se(r,u(n)),te.push(()=>le(e,"data",s)),e.$on("save",n[33]),X(e.$$.fragment),K(e.$$.fragment,1),Y(e,l.parentNode,l)):e=null}else r&&e.$set(o)},i(a){i||(e&&K(e.$$.fragment,a),i=!0)},o(a){e&&z(e.$$.fragment,a),i=!1},d(a){a&&_(l),e&&Z(e,a)}}}function Fe(n){let e=n[53].meetsRequirements(n[0]),t,l,i=e&&Be(n);return{c(){i&&i.c(),t=Ie()},l(s){i&&i.l(s),t=Ie()},m(s,r){i&&i.m(s,r),E(s,t,r),l=!0},p(s,r){r[0]&1&&(e=s[53].meetsRequirements(s[0])),e?i?(i.p(s,r),r[0]&1&&K(i,1)):(i=Be(s),i.c(),K(i,1),i.m(t.parentNode,t)):i&&(re(),z(i,1,1,()=>{i=null}),ae())},i(s){l||(K(i),l=!0)},o(s){z(i),l=!1},d(s){i&&i.d(s),s&&_(t)}}}function St(n){let e,t=n[0].name+"",l,i,s,r,u,a,c,o,h,d,w,C=n[0].description&&je(n);const M=[Vt,Dt],y=[];function j(p,$){return p[0]instanceof ke&&p[0].name!="Cast"&&p[0].name!="Initialize"&&p[0].name!="Cleanup"?0:p[0]instanceof Ee||p[0]instanceof we||p[0]instanceof de?1:-1}~(c=j(n))&&(o=y[c]=M[c](n));let m=n[0]instanceof de&&ze(n),W=n[0].data,I=[];for(let p=0;p<W.length;p+=1)I[p]=Fe(ye(n,W,p));const V=p=>z(I[p],1,1,()=>{I[p]=null});return{c(){e=q("h2"),l=F(t),i=N(),C&&C.c(),s=N(),r=q("hr"),u=N(),a=q("div"),o&&o.c(),h=N(),m&&m.c(),d=N();for(let p=0;p<I.length;p+=1)I[p].c();this.h()},l(p){e=P(p,"H2",{});var $=T(e);l=J($,t),$.forEach(_),i=R(p),C&&C.l(p),s=R(p),r=P(p,"HR",{}),u=R(p),a=P(p,"DIV",{class:!0});var A=T(a);o&&o.l(A),h=R(A),m&&m.l(A),d=R(A);for(let g=0;g<I.length;g+=1)I[g].l(A);A.forEach(_),this.h()},h(){H(a,"class","component-entry svelte-crwhqu")},m(p,$){E(p,e,$),D(e,l),E(p,i,$),C&&C.m(p,$),E(p,s,$),E(p,r,$),E(p,u,$),E(p,a,$),~c&&y[c].m(a,null),D(a,h),m&&m.m(a,null),D(a,d);for(let A=0;A<I.length;A+=1)I[A]&&I[A].m(a,null);w=!0},p(p,$){(!w||$[0]&1)&&t!==(t=p[0].name+"")&&ie(l,t),p[0].description?C?C.p(p,$):(C=je(p),C.c(),C.m(s.parentNode,s)):C&&(C.d(1),C=null);let A=c;if(c=j(p),c===A?~c&&y[c].p(p,$):(o&&(re(),z(y[A],1,1,()=>{y[A]=null}),ae()),~c?(o=y[c],o?o.p(p,$):(o=y[c]=M[c](p),o.c()),K(o,1),o.m(a,h)):o=null),p[0]instanceof de?m?(m.p(p,$),$[0]&1&&K(m,1)):(m=ze(p),m.c(),K(m,1),m.m(a,d)):m&&(re(),z(m,1,1,()=>{m=null}),ae()),$[0]&1){W=p[0].data;let g;for(g=0;g<W.length;g+=1){const f=ye(p,W,g);I[g]?(I[g].p(f,$),K(I[g],1)):(I[g]=Fe(f),I[g].c(),K(I[g],1),I[g].m(a,null))}for(re(),g=W.length;g<I.length;g+=1)V(g);ae()}},i(p){if(!w){K(o),K(m);for(let $=0;$<W.length;$+=1)K(I[$]);w=!0}},o(p){z(o),z(m),I=I.filter(Boolean);for(let $=0;$<I.length;$+=1)z(I[$]);w=!1},d(p){p&&_(e),p&&_(i),C&&C.d(p),p&&_(s),p&&_(r),p&&_(u),p&&_(a),~c&&y[c].d(),m&&m.d(),he(I,p)}}}function Je(n){let e,t,l,i,s,r,u,a=n[7],c=[];for(let o=0;o<a.length;o+=1)c[o]=Qe(Me(n,a,o));return{c(){e=q("hr"),t=N(),l=q("div"),i=q("h3"),s=F("Conditions"),r=N(),u=q("div");for(let o=0;o<c.length;o+=1)c[o].c();this.h()},l(o){e=P(o,"HR",{}),t=R(o),l=P(o,"DIV",{class:!0});var h=T(l);i=P(h,"H3",{class:!0});var d=T(i);s=J(d,"Conditions"),d.forEach(_),h.forEach(_),r=R(o),u=P(o,"DIV",{class:!0});var w=T(u);for(let C=0;C<c.length;C+=1)c[C].l(w);w.forEach(_),this.h()},h(){H(i,"class","svelte-crwhqu"),H(l,"class","comp-modal-header svelte-crwhqu"),H(u,"class","triggers")},m(o,h){E(o,e,h),E(o,t,h),E(o,l,h),D(l,i),D(i,s),E(o,r,h),E(o,u,h);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(u,null)},p(o,h){if(h[0]&4224){a=o[7];let d;for(d=0;d<a.length;d+=1){const w=Me(o,a,d);c[d]?c[d].p(w,h):(c[d]=Qe(w),c[d].c(),c[d].m(u,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=a.length}},d(o){o&&_(e),o&&_(t),o&&_(l),o&&_(r),o&&_(u),he(c,o)}}}function Qe(n){let e,t=n[50].name+"",l,i,s;function r(){return n[36](n[50])}return{c(){e=q("div"),l=F(t),this.h()},l(u){e=P(u,"DIV",{class:!0});var a=T(e);l=J(a,t),a.forEach(_),this.h()},h(){H(e,"class","comp-select")},m(u,a){E(u,e,a),D(e,l),i||(s=ee(e,"click",r),i=!0)},p(u,a){n=u,a[0]&128&&t!==(t=n[50].name+"")&&ie(l,t)},d(u){u&&_(e),i=!1,s()}}}function Ue(n){let e,t,l,i,s,r,u,a=n[6],c=[];for(let o=0;o<a.length;o+=1)c[o]=Xe(Re(n,a,o));return{c(){e=q("hr"),t=N(),l=q("div"),i=q("h3"),s=F("Targets"),r=N(),u=q("div");for(let o=0;o<c.length;o+=1)c[o].c();this.h()},l(o){e=P(o,"HR",{}),t=R(o),l=P(o,"DIV",{class:!0});var h=T(l);i=P(h,"H3",{class:!0});var d=T(i);s=J(d,"Targets"),d.forEach(_),h.forEach(_),r=R(o),u=P(o,"DIV",{class:!0});var w=T(u);for(let C=0;C<c.length;C+=1)c[C].l(w);w.forEach(_),this.h()},h(){H(i,"class","svelte-crwhqu"),H(l,"class","comp-modal-header svelte-crwhqu"),H(u,"class","triggers")},m(o,h){E(o,e,h),E(o,t,h),E(o,l,h),D(l,i),D(i,s),E(o,r,h),E(o,u,h);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(u,null)},p(o,h){if(h[0]&4160){a=o[6];let d;for(d=0;d<a.length;d+=1){const w=Re(o,a,d);c[d]?c[d].p(w,h):(c[d]=Xe(w),c[d].c(),c[d].m(u,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=a.length}},d(o){o&&_(e),o&&_(t),o&&_(l),o&&_(r),o&&_(u),he(c,o)}}}function Xe(n){let e,t=n[47].name+"",l,i,s;function r(){return n[37](n[47])}return{c(){e=q("div"),l=F(t),this.h()},l(u){e=P(u,"DIV",{class:!0});var a=T(e);l=J(a,t),a.forEach(_),this.h()},h(){H(e,"class","comp-select")},m(u,a){E(u,e,a),D(e,l),i||(s=ee(e,"click",r),i=!0)},p(u,a){n=u,a[0]&64&&t!==(t=n[47].name+"")&&ie(l,t)},d(u){u&&_(e),i=!1,s()}}}function Ye(n){let e,t,l,i,s,r,u,a=n[8],c=[];for(let o=0;o<a.length;o+=1)c[o]=Ze(Ne(n,a,o));return{c(){e=q("hr"),t=N(),l=q("div"),i=q("h3"),s=F("Mechanics"),r=N(),u=q("div");for(let o=0;o<c.length;o+=1)c[o].c();this.h()},l(o){e=P(o,"HR",{}),t=R(o),l=P(o,"DIV",{class:!0});var h=T(l);i=P(h,"H3",{class:!0});var d=T(i);s=J(d,"Mechanics"),d.forEach(_),h.forEach(_),r=R(o),u=P(o,"DIV",{class:!0});var w=T(u);for(let C=0;C<c.length;C+=1)c[C].l(w);w.forEach(_),this.h()},h(){H(i,"class","svelte-crwhqu"),H(l,"class","comp-modal-header svelte-crwhqu"),H(u,"class","triggers")},m(o,h){E(o,e,h),E(o,t,h),E(o,l,h),D(l,i),D(i,s),E(o,r,h),E(o,u,h);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(u,null)},p(o,h){if(h[0]&4352){a=o[8];let d;for(d=0;d<a.length;d+=1){const w=Ne(o,a,d);c[d]?c[d].p(w,h):(c[d]=Ze(w),c[d].c(),c[d].m(u,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=a.length}},d(o){o&&_(e),o&&_(t),o&&_(l),o&&_(r),o&&_(u),he(c,o)}}}function Ze(n){let e,t=n[44].name+"",l,i,s;function r(){return n[38](n[44])}return{c(){e=q("div"),l=F(t),this.h()},l(u){e=P(u,"DIV",{class:!0});var a=T(e);l=J(a,t),a.forEach(_),this.h()},h(){H(e,"class","comp-select")},m(u,a){E(u,e,a),D(e,l),i||(s=ee(e,"click",r),i=!0)},p(u,a){n=u,a[0]&256&&t!==(t=n[44].name+"")&&ie(l,t)},d(u){u&&_(e),i=!1,s()}}}function Ht(n){let e,t,l,i,s,r,u,a,c,o,h,d,w,C,M,y,j,m,W,I;function V(f){n[35](f)}let p={placeholder:"Search..."};n[3]!==void 0&&(p.value=n[3]),a=new pe({props:p}),te.push(()=>le(a,"value",V));let $=n[7].length>0&&Je(n),A=n[6].length>0&&Ue(n),g=n[8].length>0&&Ye(n);return{c(){e=q("div"),t=q("div"),l=N(),i=q("h2"),s=F("Add a Component"),r=N(),u=q("div"),X(a.$$.fragment),o=N(),$&&$.c(),h=N(),A&&A.c(),d=N(),g&&g.c(),w=N(),C=q("hr"),M=N(),y=q("div"),j=F("Cancel"),this.h()},l(f){e=P(f,"DIV",{class:!0});var b=T(e);t=P(b,"DIV",{}),T(t).forEach(_),l=R(b),i=P(b,"H2",{});var Q=T(i);s=J(Q,"Add a Component"),Q.forEach(_),r=R(b),u=P(b,"DIV",{class:!0});var O=T(u);x(a.$$.fragment,O),O.forEach(_),b.forEach(_),o=R(f),$&&$.l(f),h=R(f),A&&A.l(f),d=R(f),g&&g.l(f),w=R(f),C=P(f,"HR",{}),M=R(f),y=P(f,"DIV",{class:!0});var G=T(y);j=J(G,"Cancel"),G.forEach(_),this.h()},h(){H(u,"class","search-bar"),H(e,"class","modal-header-wrapper"),H(y,"class","cancel")},m(f,b){E(f,e,b),D(e,t),D(e,l),D(e,i),D(i,s),D(e,r),D(e,u),Y(a,u,null),E(f,o,b),$&&$.m(f,b),E(f,h,b),A&&A.m(f,b),E(f,d,b),g&&g.m(f,b),E(f,w,b),E(f,C,b),E(f,M,b),E(f,y,b),D(y,j),m=!0,W||(I=ee(y,"click",n[39]),W=!0)},p(f,b){const Q={};!c&&b[0]&8&&(c=!0,Q.value=f[3],ne(()=>c=!1)),a.$set(Q),f[7].length>0?$?$.p(f,b):($=Je(f),$.c(),$.m(h.parentNode,h)):$&&($.d(1),$=null),f[6].length>0?A?A.p(f,b):(A=Ue(f),A.c(),A.m(d.parentNode,d)):A&&(A.d(1),A=null),f[8].length>0?g?g.p(f,b):(g=Ye(f),g.c(),g.m(w.parentNode,w)):g&&(g.d(1),g=null)},i(f){m||(K(a.$$.fragment,f),m=!0)},o(f){z(a.$$.fragment,f),m=!1},d(f){f&&_(e),Z(a),f&&_(o),$&&$.d(f),f&&_(h),A&&A.d(f),f&&_(d),g&&g.d(f),f&&_(w),f&&_(C),f&&_(M),f&&_(y),W=!1,I()}}}function Tt(n){let e,t,l,i,s,r,u,a=n[11](n[9])+"",c,o=(n[9]?" ":": ")+n[0].name,h,d,w,C,M,y,j,m,W,I,V,p;function $(S,v){return S[5]?Ct:It}let A=$(n),g=A(n),f=!n[5]&&Oe(n);function b(S){n[34](S)}let Q={width:"70%",$$slots:{default:[St]},$$scope:{ctx:n}};n[2]!==void 0&&(Q.open=n[2]),M=new Ve({props:Q}),te.push(()=>le(M,"open",b));function O(S){n[40](S)}let G={width:"70%",$$slots:{default:[Ht]},$$scope:{ctx:n}};return n[4]!==void 0&&(G.open=n[4]),m=new Ve({props:G}),te.push(()=>le(m,"open",O)),{c(){e=q("div"),t=q("div"),g.c(),l=N(),i=q("div"),s=N(),r=q("div"),u=q("span"),c=F(a),h=F(o),d=N(),f&&f.c(),C=N(),X(M.$$.fragment),j=N(),X(m.$$.fragment),this.h()},l(S){e=P(S,"DIV",{class:!0});var v=T(e);t=P(v,"DIV",{draggable:!0,class:!0});var L=T(t);g.l(L),l=R(L),i=P(L,"DIV",{class:!0}),T(i).forEach(_),s=R(L),r=P(L,"DIV",{class:!0});var U=T(r);u=P(U,"SPAN",{class:!0});var B=T(u);c=J(B,a),B.forEach(_),h=J(U,o),U.forEach(_),d=R(L),f&&f.l(L),L.forEach(_),v.forEach(_),C=R(S),x(M.$$.fragment,S),j=R(S),x(m.$$.fragment,S),this.h()},h(){H(i,"class","corner svelte-crwhqu"),H(u,"class","svelte-crwhqu"),H(r,"class","name svelte-crwhqu"),H(t,"draggable","true"),H(t,"class","comp-body svelte-crwhqu"),dt(t,"--comp-color",n[13]()),H(e,"class","wrapper svelte-crwhqu")},m(S,v){E(S,e,v),D(e,t),g.m(t,null),D(t,l),D(t,i),D(t,s),D(t,r),D(r,u),D(u,c),D(r,h),D(t,d),f&&f.m(t,null),E(S,C,v),Y(M,S,v),E(S,j,v),Y(m,S,v),I=!0,V||(p=[ee(i,"click",ue(n[18])),ee(t,"dragstart",ue(n[25])),ee(t,"dragend",n[26]),ee(t,"click",ue(n[27]))],V=!0)},p(S,v){A!==(A=$(S))&&(g.d(1),g=A(S),g&&(g.c(),K(g,1),g.m(t,l))),(!I||v[0]&512)&&a!==(a=S[11](S[9])+"")&&ie(c,a),(!I||v[0]&513)&&o!==(o=(S[9]?" ":": ")+S[0].name)&&ie(h,o),S[5]?f&&(re(),z(f,1,1,()=>{f=null}),ae()):f?(f.p(S,v),v[0]&32&&K(f,1)):(f=Oe(S),f.c(),K(f,1),f.m(t,null));const L={};v[0]&1|v[1]&268435456&&(L.$$scope={dirty:v,ctx:S}),!y&&v[0]&4&&(y=!0,L.open=S[2],ne(()=>y=!1)),M.$set(L);const U={};v[0]&472|v[1]&268435456&&(U.$$scope={dirty:v,ctx:S}),!W&&v[0]&16&&(W=!0,U.open=S[4],ne(()=>W=!1)),m.$set(U)},i(S){I||(K(g),K(f),w&&w.end(1),K(M.$$.fragment,S),K(m.$$.fragment,S),I=!0)},o(S){z(f),w=pt(t,se,{}),z(M.$$.fragment,S),z(m.$$.fragment,S),I=!1},d(S){S&&_(e),g.d(),f&&f.d(),S&&w&&w.end(),S&&_(C),Z(M,S),S&&_(j),Z(m,S),V=!1,ot(p)}}}function Nt(n,e,t){let l;ht(n,wt,k=>t(9,l=k));let{skill:i}=e,{component:s}=e;const r=mt();let u=!1,a=!1,c=!1,o="",h={},d={},w={},C,M,y;rt(()=>{ge.targets.subscribe(k=>t(15,h=k)),ge.conditions.subscribe(k=>t(16,d=k)),ge.mechanics.subscribe(k=>t(17,w=k))});const j=(k=!1)=>{if(k){if(s instanceof ke)return"🚩";if(s instanceof we)return"⚠";if(s instanceof Ee)return"🎯";if(s instanceof de)return"🔧"}return s instanceof ke?"Trigger":s instanceof we?"Condition":s instanceof Ee?"Target":s instanceof de?"Mechanic":"???"},m=k=>{t(0,s.components=[...s.components,k.new()],s),t(4,a=!1),t(3,o=""),r("save")},W=()=>s instanceof ke?"#0083ef":s instanceof we?"#feac00":s instanceof Ee?"#04af38":s instanceof de?"#ff3a3a":"orange",I=(k,{duration:ve})=>({duration:ve,css:Ce=>`transform: rotate(${180-Et(Ce)*180}deg);`}),V=()=>t(5,c=!c),p=()=>console.log("clicked copy"),$=()=>{i.removeComponent(s),r("update")};function A(k,ve,Ce,Ae){Ce[Ae]=k,t(0,s)}function g(k){De.call(this,n,k)}function f(k){De.call(this,n,k)}const b=()=>t(4,a=!0),Q=()=>He.set(s),O=()=>He.set(void 0),G=()=>t(2,u=!0);function S(k){n.$$.not_equal(s.mana,k)&&(s.mana=k,t(0,s))}function v(k){n.$$.not_equal(s.cooldown,k)&&(s.cooldown=k,t(0,s))}function L(k){n.$$.not_equal(s.iconKey,k)&&(s.iconKey=k,t(0,s))}function U(k){n.$$.not_equal(s.countsAsCast,k)&&(s.countsAsCast=k,t(0,s))}function B(k,ve){n.$$.not_equal(ve.data,k)&&(ve.data=k,t(0,s))}function fe(k){De.call(this,n,k)}function be(k){u=k,t(2,u)}function $e(k){o=k,t(3,o)}const ce=k=>m(k.component),me=k=>m(k.component),ct=k=>m(k.component),ut=()=>t(4,a=!1);function _t(k){a=k,t(4,a)}return n.$$set=k=>{"skill"in k&&t(1,i=k.skill),"component"in k&&t(0,s=k.component)},n.$$.update=()=>{n.$$.dirty[0]&229384&&(t(6,C=Object.keys(h).filter(k=>h[k].name.toLowerCase().includes(o.toLowerCase())).sort().map(k=>h[k])),t(7,M=Object.keys(d).filter(k=>d[k].name.toLowerCase().includes(o.toLowerCase())).sort().map(k=>d[k])),t(8,y=Object.keys(w).filter(k=>w[k].name.toLowerCase().includes(o.toLowerCase())).sort().map(k=>w[k]))),n.$$.dirty[0]&1&&s&&r("save"),n.$$.dirty[0]&5&&u&&s&&s.data.filter(k=>k.dataSource).forEach(k=>k.init())},[s,i,u,o,a,c,C,M,y,l,r,j,m,W,I,h,d,w,V,p,$,A,g,f,b,Q,O,G,S,v,L,U,B,fe,be,$e,ce,me,ct,ut,_t]}class ft extends nt{constructor(e){super(),st(this,e,Nt,Tt,it,{skill:1,component:0},null,[-1,-1])}}function Ge(n,e,t){const l=n.slice();return l[17]=e[t],l}function xe(n,e,t){const l=n.slice();return l[20]=e[t],l}function et(n){let e,t,l;return t=new ft({props:{skill:n[1],component:n[20]}}),t.$on("update",n[5]),t.$on("save",n[6]),{c(){e=q("div"),X(t.$$.fragment),this.h()},l(i){e=P(i,"DIV",{class:!0});var s=T(e);x(t.$$.fragment,s),s.forEach(_),this.h()},h(){H(e,"class","widget svelte-ppofb5")},m(i,s){E(i,e,s),Y(t,e,null),l=!0},p(i,s){const r={};s&2&&(r.skill=i[1]),s&2&&(r.component=i[20]),t.$set(r)},i(i){l||(K(t.$$.fragment,i),l=!0)},o(i){z(t.$$.fragment,i),l=!1},d(i){i&&_(e),Z(t)}}}function tt(n){let e,t;return{c(){e=q("div"),t=F("No triggers added yet.")},l(l){e=P(l,"DIV",{});var i=T(e);t=J(i,"No triggers added yet."),i.forEach(_)},m(l,i){E(l,e,i),D(e,t)},d(l){l&&_(e)}}}function lt(n){let e,t=n[17].name+"",l,i,s,r;function u(){return n[11](n[17])}return{c(){e=q("div"),l=F(t),i=N(),this.h()},l(a){e=P(a,"DIV",{class:!0});var c=T(e);l=J(c,t),i=R(c),c.forEach(_),this.h()},h(){H(e,"class","comp-select")},m(a,c){E(a,e,c),D(e,l),D(e,i),s||(r=ee(e,"click",u),s=!0)},p(a,c){n=a,c&8&&t!==(t=n[17].name+"")&&ie(l,t)},d(a){a&&_(e),s=!1,r()}}}function Rt(n){let e,t,l,i,s,r,u,a,c,o,h,d,w,C,M,y,j,m,W,I,V;function p(f){n[10](f)}let $={placeholder:"Search..."};n[0]!==void 0&&($.value=n[0]),a=new pe({props:$}),te.push(()=>le(a,"value",p));let A=n[3],g=[];for(let f=0;f<A.length;f+=1)g[f]=lt(Ge(n,A,f));return{c(){e=q("div"),t=q("div"),l=N(),i=q("h2"),s=F("Select New Trigger"),r=N(),u=q("div"),X(a.$$.fragment),o=N(),h=q("hr"),d=N(),w=q("div");for(let f=0;f<g.length;f+=1)g[f].c();C=N(),M=q("hr"),y=N(),j=q("div"),m=F("Cancel"),this.h()},l(f){e=P(f,"DIV",{class:!0});var b=T(e);t=P(b,"DIV",{}),T(t).forEach(_),l=R(b),i=P(b,"H2",{class:!0});var Q=T(i);s=J(Q,"Select New Trigger"),Q.forEach(_),r=R(b),u=P(b,"DIV",{class:!0});var O=T(u);x(a.$$.fragment,O),O.forEach(_),b.forEach(_),o=R(f),h=P(f,"HR",{}),d=R(f),w=P(f,"DIV",{class:!0});var G=T(w);for(let v=0;v<g.length;v+=1)g[v].l(G);G.forEach(_),C=R(f),M=P(f,"HR",{}),y=R(f),j=P(f,"DIV",{class:!0});var S=T(j);m=J(S,"Cancel"),S.forEach(_),this.h()},h(){H(i,"class","modal-header svelte-ppofb5"),H(u,"class","search-bar"),H(e,"class","modal-header-wrapper"),H(w,"class","triggers"),H(j,"class","cancel")},m(f,b){E(f,e,b),D(e,t),D(e,l),D(e,i),D(i,s),D(e,r),D(e,u),Y(a,u,null),E(f,o,b),E(f,h,b),E(f,d,b),E(f,w,b);for(let Q=0;Q<g.length;Q+=1)g[Q]&&g[Q].m(w,null);E(f,C,b),E(f,M,b),E(f,y,b),E(f,j,b),D(j,m),W=!0,I||(V=ee(j,"click",n[12]),I=!0)},p(f,b){const Q={};if(!c&&b&1&&(c=!0,Q.value=f[0],ne(()=>c=!1)),a.$set(Q),b&24){A=f[3];let O;for(O=0;O<A.length;O+=1){const G=Ge(f,A,O);g[O]?g[O].p(G,b):(g[O]=lt(G),g[O].c(),g[O].m(w,null))}for(;O<g.length;O+=1)g[O].d(1);g.length=A.length}},i(f){W||(K(a.$$.fragment,f),W=!0)},o(f){z(a.$$.fragment,f),W=!1},d(f){f&&_(e),Z(a),f&&_(o),f&&_(h),f&&_(d),f&&_(w),he(g,f),f&&_(C),f&&_(M),f&&_(y),f&&_(j),I=!1,V()}}}function Mt(n){let e,t,l,i,s=n[1].name+"",r,u,a,c,o,h,d,w,C,M,y,j,m,W,I,V,p,$,A,g;document.title=e="ProSkillAPI Dynamic Editor - "+n[1].name;let f=n[1].triggers,b=[];for(let v=0;v<f.length;v+=1)b[v]=et(xe(n,f,v));const Q=v=>z(b[v],1,1,()=>{b[v]=null});let O=n[1].triggers.length==0&&tt();function G(v){n[13](v)}let S={$$slots:{default:[Rt]},$$scope:{ctx:n}};return n[2]!==void 0&&(S.open=n[2]),V=new Ve({props:S}),te.push(()=>le(V,"open",G)),{c(){t=N(),l=q("div"),i=q("h2"),r=F(s),u=N(),a=q("a"),c=F("edit"),h=N(),d=q("div"),w=q("span"),C=F("new_label"),M=N(),y=q("hr"),j=N(),m=q("div");for(let v=0;v<b.length;v+=1)b[v].c();W=N(),O&&O.c(),I=N(),X(V.$$.fragment),this.h()},l(v){bt("svelte-lamdv3",document.head).forEach(_),t=R(v),l=P(v,"DIV",{class:!0});var U=T(l);i=P(U,"H2",{class:!0});var B=T(i);r=J(B,s),u=R(B),a=P(B,"A",{class:!0,title:!0,href:!0});var fe=T(a);c=J(fe,"edit"),fe.forEach(_),h=R(B),d=P(B,"DIV",{class:!0,title:!0});var be=T(d);w=P(be,"SPAN",{class:!0});var $e=T(w);C=J($e,"new_label"),$e.forEach(_),be.forEach(_),B.forEach(_),M=R(U),y=P(U,"HR",{}),U.forEach(_),j=R(v),m=P(v,"DIV",{class:!0});var ce=T(m);for(let me=0;me<b.length;me+=1)b[me].l(ce);W=R(ce),O&&O.l(ce),ce.forEach(_),I=R(v),x(V.$$.fragment,v),this.h()},h(){H(a,"class","material-symbols-rounded edit-skill chip svelte-ppofb5"),H(a,"title","Edit"),H(a,"href",o="/skill/"+n[1].name+"/edit"),H(w,"class","material-symbols-rounded"),H(d,"class","add-trigger chip svelte-ppofb5"),H(d,"title","Add Trigger"),H(i,"class","svelte-ppofb5"),H(l,"class","header svelte-ppofb5"),H(m,"class","container svelte-ppofb5")},m(v,L){E(v,t,L),E(v,l,L),D(l,i),D(i,r),D(i,u),D(i,a),D(a,c),D(i,h),D(i,d),D(d,w),D(w,C),D(l,M),D(l,y),E(v,j,L),E(v,m,L);for(let U=0;U<b.length;U+=1)b[U]&&b[U].m(m,null);D(m,W),O&&O.m(m,null),E(v,I,L),Y(V,v,L),$=!0,A||(g=ee(d,"click",n[9]),A=!0)},p(v,[L]){if((!$||L&2)&&e!==(e="ProSkillAPI Dynamic Editor - "+v[1].name)&&(document.title=e),(!$||L&2)&&s!==(s=v[1].name+"")&&ie(r,s),(!$||L&2&&o!==(o="/skill/"+v[1].name+"/edit"))&&H(a,"href",o),L&98){f=v[1].triggers;let B;for(B=0;B<f.length;B+=1){const fe=xe(v,f,B);b[B]?(b[B].p(fe,L),K(b[B],1)):(b[B]=et(fe),b[B].c(),K(b[B],1),b[B].m(m,W))}for(re(),B=f.length;B<b.length;B+=1)Q(B);ae()}v[1].triggers.length==0?O||(O=tt(),O.c(),O.m(m,null)):O&&(O.d(1),O=null);const U={};L&8388621&&(U.$$scope={dirty:L,ctx:v}),!p&&L&4&&(p=!0,U.open=v[2],ne(()=>p=!1)),V.$set(U)},i(v){if(!$){for(let L=0;L<f.length;L+=1)K(b[L]);K(V.$$.fragment,v),$=!0}},o(v){b=b.filter(Boolean);for(let L=0;L<b.length;L+=1)z(b[L]);z(V.$$.fragment,v),$=!1},d(v){v&&_(t),v&&_(l),v&&_(j),v&&_(m),he(b,v),O&&O.d(),v&&_(I),Z(V,v),A=!1,g()}}}function yt(n,e,t){let{data:l}=e,i,s=!1,r="",u,a,c={};rt(()=>{a=ge.triggers.subscribe(W=>t(8,c=W));let m;m=ge.initialized.subscribe(W=>{W&&(m&&m(),h())})}),$t(()=>{a&&a()});const o=m=>{i.triggers.push(m.detail),h(),setTimeout(()=>t(2,s=!1))},h=()=>{t(1,i.triggers=[...i.triggers],i),d()},d=()=>Te.set([...kt(Te)]),w=()=>t(2,s=!0);function C(m){r=m,t(0,r)}const M=m=>o({detail:m.clone()}),y=()=>t(2,s=!1);function j(m){s=m,t(2,s)}return n.$$set=m=>{"data"in m&&t(7,l=m.data)},n.$$.update=()=>{n.$$.dirty&128&&l&&t(1,i=l.data),n.$$.dirty&257&&t(3,u=Object.keys(c).filter(m=>m.toLowerCase().includes(r.toLowerCase())).sort().map(m=>c[m].component.new()))},[r,i,s,u,o,h,d,l,c,w,C,M,y,j]}class jt extends nt{constructor(e){super(),st(this,e,yt,Mt,it,{data:7})}}export{jt as default};
