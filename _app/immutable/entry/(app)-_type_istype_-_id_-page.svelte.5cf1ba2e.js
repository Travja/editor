import{S as nt,i as st,s as it,w as te,H as le,k as V,a as T,q as F,y as X,l as z,m as H,c as N,h as _,r as J,z as x,n as S,p as dt,b as E,C,A as Y,E as ee,J as ue,g as L,u as ie,v as re,d as W,f as ae,O as ne,R as pt,B as Z,F as ot,T as mt,a6 as ht,o as rt,X as vt,P as _e,Z as oe,a2 as Ve,V as Ce,Q as at,Y as gt,a1 as me,e as je,x as Ae,a9 as bt,a0 as $t,U as kt}from"../chunks/index.d989938f.js";import{R as ge,F as ke,H as Se,t as He}from"../chunks/store.ebac307e.js";import{M as De,u as wt,c as we,b as Ee,P as de}from"../chunks/targets.33743871.js";import{s as se,P as pe,b as Et,T as ze}from"../chunks/ProInput.2123e1bf.js";function Te(n,e,t){const l=n.slice();return l[44]=e[t],l}function Ne(n,e,t){const l=n.slice();return l[47]=e[t],l}function Re(n,e,t){const l=n.slice();return l[50]=e[t],l}function Me(n,e,t){const l=n.slice();return l[53]=e[t],l[54]=e,l[55]=t,l}function qe(n,e,t){const l=n.slice();return l[56]=e[t],l[57]=e,l[58]=t,l}function jt(n){let e,t,l;return{c(){e=V("span"),t=F("expand_less"),this.h()},l(i){e=z(i,"SPAN",{class:!0});var s=H(e);t=J(s,"expand_less"),s.forEach(_),this.h()},h(){S(e,"class","material-symbols-rounded svelte-1rzjw8j")},m(i,s){E(i,e,s),C(e,t)},i(i){i&&(l||_e(()=>{l=at(e,n[14],{duration:400}),l.start()}))},o:Ve,d(i){i&&_(e)}}}function It(n){let e,t,l;return{c(){e=V("span"),t=F("expand_more"),this.h()},l(i){e=z(i,"SPAN",{class:!0});var s=H(e);t=J(s,"expand_more"),s.forEach(_),this.h()},h(){S(e,"class","material-symbols-rounded svelte-1rzjw8j")},m(i,s){E(i,e,s),C(e,t)},i(i){i&&(l||_e(()=>{l=at(e,n[14],{duration:400}),l.start()}))},o:Ve,d(i){i&&_(e)}}}function ye(n){let e,t,l,i,s,r,u,a,c,o,m=[],d=new Map,w,I,R,M,K,h=n[0].components;const O=D=>D[56].id;for(let D=0;D<h.length;D+=1){let p=qe(n,h,D),$=O(p);d.set($,m[D]=Le($,p))}let j=n[0].isParent&&Oe(n);return{c(){e=V("div"),t=V("div"),l=F("content_copy"),s=T(),r=V("div"),u=F("delete"),c=T(),o=V("div");for(let D=0;D<m.length;D+=1)m[D].c();w=T(),j&&j.c(),this.h()},l(D){e=z(D,"DIV",{class:!0});var p=H(e);t=z(p,"DIV",{class:!0,title:!0});var $=H(t);l=J($,"content_copy"),$.forEach(_),s=N(p),r=z(p,"DIV",{class:!0,title:!0});var P=H(r);u=J(P,"delete"),P.forEach(_),p.forEach(_),c=N(D),o=z(D,"DIV",{class:!0});var g=H(o);for(let f=0;f<m.length;f+=1)m[f].l(g);w=N(g),j&&j.l(g),g.forEach(_),this.h()},h(){S(t,"class","material-symbols-rounded control copy svelte-1rzjw8j"),S(t,"title","Copy"),S(r,"class","material-symbols-rounded control delete svelte-1rzjw8j"),S(r,"title","Delete"),S(e,"class","controls svelte-1rzjw8j"),S(o,"class","children svelte-1rzjw8j")},m(D,p){E(D,e,p),C(e,t),C(t,l),C(e,s),C(e,r),C(r,u),E(D,c,p),E(D,o,p);for(let $=0;$<m.length;$+=1)m[$]&&m[$].m(o,null);C(o,w),j&&j.m(o,null),R=!0,M||(K=[ee(t,"click",ue(n[19])),ee(r,"click",ue(n[20]))],M=!0)},p(D,p){p[0]&3&&(h=D[0].components,re(),m=vt(m,p,O,1,D,h,d,o,gt,Le,w,qe),ae()),D[0].isParent?j?j.p(D,p):(j=Oe(D),j.c(),j.m(o,null)):j&&(j.d(1),j=null)},i(D){if(!R){_e(()=>{R&&(i||(i=oe(t,se,{},!0)),i.run(1))}),_e(()=>{R&&(a||(a=oe(r,se,{},!0)),a.run(1))});for(let p=0;p<h.length;p+=1)L(m[p]);D&&_e(()=>{R&&(I||(I=oe(o,se,{},!0)),I.run(1))}),R=!0}},o(D){i||(i=oe(t,se,{},!1)),i.run(0),a||(a=oe(r,se,{},!1)),a.run(0);for(let p=0;p<m.length;p+=1)W(m[p]);D&&(I||(I=oe(o,se,{},!1)),I.run(0)),R=!1},d(D){D&&_(e),D&&i&&i.end(),D&&a&&a.end(),D&&_(c),D&&_(o);for(let p=0;p<m.length;p+=1)m[p].d();j&&j.d(),D&&I&&I.end(),M=!1,ot(K)}}}function Le(n,e){let t,l,i,s,r;function u(c){e[21](c,e[56],e[57],e[58])}let a={skill:e[1]};return e[56]!==void 0&&(a.component=e[56]),l=new ft({props:a}),te.push(()=>le(l,"component",u)),l.$on("update",e[22]),l.$on("save",e[23]),{key:n,first:null,c(){t=V("span"),X(l.$$.fragment),this.h()},l(c){t=z(c,"SPAN",{});var o=H(t);x(l.$$.fragment,o),o.forEach(_),this.h()},h(){this.first=t},m(c,o){E(c,t,o),Y(l,t,null),r=!0},p(c,o){e=c;const m={};o[0]&2&&(m.skill=e[1]),!i&&o[0]&1&&(i=!0,m.component=e[56],ne(()=>i=!1)),l.$set(m)},i(c){r||(L(l.$$.fragment,c),c&&_e(()=>{r&&(s||(s=oe(t,se,{},!0)),s.run(1))}),r=!0)},o(c){W(l.$$.fragment,c),c&&(s||(s=oe(t,se,{},!1)),s.run(0)),r=!1},d(c){c&&_(t),Z(l),c&&s&&s.end()}}}function Oe(n){let e,t,l,i;return{c(){e=V("div"),t=F("+ Add Component"),this.h()},l(s){e=z(s,"DIV",{class:!0});var r=H(e);t=J(r,"+ Add Component"),r.forEach(_),this.h()},h(){S(e,"class","chip svelte-1rzjw8j")},m(s,r){E(s,e,r),C(e,t),l||(i=ee(e,"click",ue(n[24])),l=!0)},p:Ve,d(s){s&&_(e),l=!1,i()}}}function Ke(n){let e,t=n[0].description+"",l;return{c(){e=V("div"),l=F(t),this.h()},l(i){e=z(i,"DIV",{class:!0});var s=H(e);l=J(s,t),s.forEach(_),this.h()},h(){S(e,"class","modal-desc svelte-1rzjw8j")},m(i,s){E(i,e,s),C(e,l)},p(i,s){s[0]&1&&t!==(t=i[0].description+"")&&ie(l,t)},d(i){i&&_(e)}}}function Ct(n){let e,t,l;function i(r){n[30](r)}let s={label:"Icon Key",tooltip:'The key used by the component in the Icon Lore. If this is set to "example" and has a value name of "value", it can be referenced using the string "{attr:example.value}"'};return n[0].iconKey!==void 0&&(s.value=n[0].iconKey),e=new pe({props:s}),te.push(()=>le(e,"value",i)),{c(){X(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,u){Y(e,r,u),l=!0},p(r,u){const a={};!t&&u[0]&1&&(t=!0,a.value=r[0].iconKey,ne(()=>t=!1)),e.$set(a)},i(r){l||(L(e.$$.fragment,r),l=!0)},o(r){W(e.$$.fragment,r),l=!1},d(r){Z(e,r)}}}function Dt(n){let e,t,l,i;return e=new pe({props:{label:"Mana",tooltip:"Whether this trigger requires the mana cost to activate",$$slots:{default:[Vt]},$$scope:{ctx:n}}}),l=new pe({props:{label:"Cooldown",tooltip:"Whether this trigger requires to be off cooldown to activate",$$slots:{default:[zt]},$$scope:{ctx:n}}}),{c(){X(e.$$.fragment),t=T(),X(l.$$.fragment)},l(s){x(e.$$.fragment,s),t=N(s),x(l.$$.fragment,s)},m(s,r){Y(e,s,r),E(s,t,r),Y(l,s,r),i=!0},p(s,r){const u={};r[0]&1|r[1]&268435456&&(u.$$scope={dirty:r,ctx:s}),e.$set(u);const a={};r[0]&1|r[1]&268435456&&(a.$$scope={dirty:r,ctx:s}),l.$set(a)},i(s){i||(L(e.$$.fragment,s),L(l.$$.fragment,s),i=!0)},o(s){W(e.$$.fragment,s),W(l.$$.fragment,s),i=!1},d(s){Z(e,s),s&&_(t),Z(l,s)}}}function Vt(n){let e,t,l;function i(r){n[28](r)}let s={};return n[0].mana!==void 0&&(s.data=n[0].mana),e=new ze({props:s}),te.push(()=>le(e,"data",i)),{c(){X(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,u){Y(e,r,u),l=!0},p(r,u){const a={};!t&&u[0]&1&&(t=!0,a.data=r[0].mana,ne(()=>t=!1)),e.$set(a)},i(r){l||(L(e.$$.fragment,r),l=!0)},o(r){W(e.$$.fragment,r),l=!1},d(r){Z(e,r)}}}function zt(n){let e,t,l;function i(r){n[29](r)}let s={};return n[0].cooldown!==void 0&&(s.data=n[0].cooldown),e=new ze({props:s}),te.push(()=>le(e,"data",i)),{c(){X(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,u){Y(e,r,u),l=!0},p(r,u){const a={};!t&&u[0]&1&&(t=!0,a.data=r[0].cooldown,ne(()=>t=!1)),e.$set(a)},i(r){l||(L(e.$$.fragment,r),l=!0)},o(r){W(e.$$.fragment,r),l=!1},d(r){Z(e,r)}}}function We(n){let e,t;return e=new pe({props:{label:"Counts as Cast",tooltip:'Whether this mechanic running treats the skill as "casted" and will consume mana and start the cooldown. Set to false if it is a mechanic applled when the skill fails such as cleanup or an error message"',$$slots:{default:[Pt]},$$scope:{ctx:n}}}),{c(){X(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,i){Y(e,l,i),t=!0},p(l,i){const s={};i[0]&1|i[1]&268435456&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){t||(L(e.$$.fragment,l),t=!0)},o(l){W(e.$$.fragment,l),t=!1},d(l){Z(e,l)}}}function Pt(n){let e,t,l;function i(r){n[31](r)}let s={};return n[0].countsAsCast!==void 0&&(s.data=n[0].countsAsCast),e=new ze({props:s}),te.push(()=>le(e,"data",i)),{c(){X(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,u){Y(e,r,u),l=!0},p(r,u){const a={};!t&&u[0]&1&&(t=!0,a.data=r[0].countsAsCast,ne(()=>t=!1)),e.$set(a)},i(r){l||(L(e.$$.fragment,r),l=!0)},o(r){W(e.$$.fragment,r),l=!1},d(r){Z(e,r)}}}function Be(n){let e,t,l,i;function s(a){n[32](a,n[53])}var r=n[53].component;function u(a){let c={name:a[53].name,tooltip:a[53].tooltip,multiple:a[53].multiple};return a[53].data!==void 0&&(c.data=a[53].data),{props:c}}return r&&(e=Ae(r,u(n)),te.push(()=>le(e,"data",s)),e.$on("save",n[33])),{c(){e&&X(e.$$.fragment),l=je()},l(a){e&&x(e.$$.fragment,a),l=je()},m(a,c){e&&Y(e,a,c),E(a,l,c),i=!0},p(a,c){n=a;const o={};if(c[0]&1&&(o.name=n[53].name),c[0]&1&&(o.tooltip=n[53].tooltip),c[0]&1&&(o.multiple=n[53].multiple),!t&&c[0]&1&&(t=!0,o.data=n[53].data,ne(()=>t=!1)),c[0]&1&&r!==(r=n[53].component)){if(e){re();const m=e;W(m.$$.fragment,1,0,()=>{Z(m,1)}),ae()}r?(e=Ae(r,u(n)),te.push(()=>le(e,"data",s)),e.$on("save",n[33]),X(e.$$.fragment),L(e.$$.fragment,1),Y(e,l.parentNode,l)):e=null}else r&&e.$set(o)},i(a){i||(e&&L(e.$$.fragment,a),i=!0)},o(a){e&&W(e.$$.fragment,a),i=!1},d(a){a&&_(l),e&&Z(e,a)}}}function Fe(n){let e=n[53].meetsRequirements(n[0]),t,l,i=e&&Be(n);return{c(){i&&i.c(),t=je()},l(s){i&&i.l(s),t=je()},m(s,r){i&&i.m(s,r),E(s,t,r),l=!0},p(s,r){r[0]&1&&(e=s[53].meetsRequirements(s[0])),e?i?(i.p(s,r),r[0]&1&&L(i,1)):(i=Be(s),i.c(),L(i,1),i.m(t.parentNode,t)):i&&(re(),W(i,1,1,()=>{i=null}),ae())},i(s){l||(L(i),l=!0)},o(s){W(i),l=!1},d(s){i&&i.d(s),s&&_(t)}}}function At(n){let e,t=n[0].name+"",l,i,s,r,u,a,c,o,m,d,w,I=n[0].description&&Ke(n);const R=[Dt,Ct],M=[];function K(p,$){return p[0]instanceof ke&&p[0].name!="Cast"&&p[0].name!="Initialize"&&p[0].name!="Cleanup"?0:p[0]instanceof Ee||p[0]instanceof we||p[0]instanceof de?1:-1}~(c=K(n))&&(o=M[c]=R[c](n));let h=n[0]instanceof de&&We(n),O=n[0].data,j=[];for(let p=0;p<O.length;p+=1)j[p]=Fe(Me(n,O,p));const D=p=>W(j[p],1,1,()=>{j[p]=null});return{c(){e=V("h2"),l=F(t),i=T(),I&&I.c(),s=T(),r=V("hr"),u=T(),a=V("div"),o&&o.c(),m=T(),h&&h.c(),d=T();for(let p=0;p<j.length;p+=1)j[p].c();this.h()},l(p){e=z(p,"H2",{});var $=H(e);l=J($,t),$.forEach(_),i=N(p),I&&I.l(p),s=N(p),r=z(p,"HR",{}),u=N(p),a=z(p,"DIV",{class:!0});var P=H(a);o&&o.l(P),m=N(P),h&&h.l(P),d=N(P);for(let g=0;g<j.length;g+=1)j[g].l(P);P.forEach(_),this.h()},h(){S(a,"class","component-entry svelte-1rzjw8j")},m(p,$){E(p,e,$),C(e,l),E(p,i,$),I&&I.m(p,$),E(p,s,$),E(p,r,$),E(p,u,$),E(p,a,$),~c&&M[c].m(a,null),C(a,m),h&&h.m(a,null),C(a,d);for(let P=0;P<j.length;P+=1)j[P]&&j[P].m(a,null);w=!0},p(p,$){(!w||$[0]&1)&&t!==(t=p[0].name+"")&&ie(l,t),p[0].description?I?I.p(p,$):(I=Ke(p),I.c(),I.m(s.parentNode,s)):I&&(I.d(1),I=null);let P=c;if(c=K(p),c===P?~c&&M[c].p(p,$):(o&&(re(),W(M[P],1,1,()=>{M[P]=null}),ae()),~c?(o=M[c],o?o.p(p,$):(o=M[c]=R[c](p),o.c()),L(o,1),o.m(a,m)):o=null),p[0]instanceof de?h?(h.p(p,$),$[0]&1&&L(h,1)):(h=We(p),h.c(),L(h,1),h.m(a,d)):h&&(re(),W(h,1,1,()=>{h=null}),ae()),$[0]&1){O=p[0].data;let g;for(g=0;g<O.length;g+=1){const f=Me(p,O,g);j[g]?(j[g].p(f,$),L(j[g],1)):(j[g]=Fe(f),j[g].c(),L(j[g],1),j[g].m(a,null))}for(re(),g=O.length;g<j.length;g+=1)D(g);ae()}},i(p){if(!w){L(o),L(h);for(let $=0;$<O.length;$+=1)L(j[$]);w=!0}},o(p){W(o),W(h),j=j.filter(Boolean);for(let $=0;$<j.length;$+=1)W(j[$]);w=!1},d(p){p&&_(e),p&&_(i),I&&I.d(p),p&&_(s),p&&_(r),p&&_(u),p&&_(a),~c&&M[c].d(),h&&h.d(),me(j,p)}}}function Je(n){let e,t,l,i,s,r,u,a=n[7],c=[];for(let o=0;o<a.length;o+=1)c[o]=Qe(Re(n,a,o));return{c(){e=V("hr"),t=T(),l=V("div"),i=V("h3"),s=F("Conditions"),r=T(),u=V("div");for(let o=0;o<c.length;o+=1)c[o].c();this.h()},l(o){e=z(o,"HR",{}),t=N(o),l=z(o,"DIV",{class:!0});var m=H(l);i=z(m,"H3",{class:!0});var d=H(i);s=J(d,"Conditions"),d.forEach(_),m.forEach(_),r=N(o),u=z(o,"DIV",{class:!0});var w=H(u);for(let I=0;I<c.length;I+=1)c[I].l(w);w.forEach(_),this.h()},h(){S(i,"class","svelte-1rzjw8j"),S(l,"class","comp-modal-header svelte-1rzjw8j"),S(u,"class","triggers")},m(o,m){E(o,e,m),E(o,t,m),E(o,l,m),C(l,i),C(i,s),E(o,r,m),E(o,u,m);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(u,null)},p(o,m){if(m[0]&4224){a=o[7];let d;for(d=0;d<a.length;d+=1){const w=Re(o,a,d);c[d]?c[d].p(w,m):(c[d]=Qe(w),c[d].c(),c[d].m(u,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=a.length}},d(o){o&&_(e),o&&_(t),o&&_(l),o&&_(r),o&&_(u),me(c,o)}}}function Qe(n){let e,t=n[50].name+"",l,i,s;function r(){return n[36](n[50])}return{c(){e=V("div"),l=F(t),this.h()},l(u){e=z(u,"DIV",{class:!0});var a=H(e);l=J(a,t),a.forEach(_),this.h()},h(){S(e,"class","comp-select")},m(u,a){E(u,e,a),C(e,l),i||(s=ee(e,"click",r),i=!0)},p(u,a){n=u,a[0]&128&&t!==(t=n[50].name+"")&&ie(l,t)},d(u){u&&_(e),i=!1,s()}}}function Ue(n){let e,t,l,i,s,r,u,a=n[6],c=[];for(let o=0;o<a.length;o+=1)c[o]=Xe(Ne(n,a,o));return{c(){e=V("hr"),t=T(),l=V("div"),i=V("h3"),s=F("Targets"),r=T(),u=V("div");for(let o=0;o<c.length;o+=1)c[o].c();this.h()},l(o){e=z(o,"HR",{}),t=N(o),l=z(o,"DIV",{class:!0});var m=H(l);i=z(m,"H3",{class:!0});var d=H(i);s=J(d,"Targets"),d.forEach(_),m.forEach(_),r=N(o),u=z(o,"DIV",{class:!0});var w=H(u);for(let I=0;I<c.length;I+=1)c[I].l(w);w.forEach(_),this.h()},h(){S(i,"class","svelte-1rzjw8j"),S(l,"class","comp-modal-header svelte-1rzjw8j"),S(u,"class","triggers")},m(o,m){E(o,e,m),E(o,t,m),E(o,l,m),C(l,i),C(i,s),E(o,r,m),E(o,u,m);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(u,null)},p(o,m){if(m[0]&4160){a=o[6];let d;for(d=0;d<a.length;d+=1){const w=Ne(o,a,d);c[d]?c[d].p(w,m):(c[d]=Xe(w),c[d].c(),c[d].m(u,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=a.length}},d(o){o&&_(e),o&&_(t),o&&_(l),o&&_(r),o&&_(u),me(c,o)}}}function Xe(n){let e,t=n[47].name+"",l,i,s;function r(){return n[37](n[47])}return{c(){e=V("div"),l=F(t),this.h()},l(u){e=z(u,"DIV",{class:!0});var a=H(e);l=J(a,t),a.forEach(_),this.h()},h(){S(e,"class","comp-select")},m(u,a){E(u,e,a),C(e,l),i||(s=ee(e,"click",r),i=!0)},p(u,a){n=u,a[0]&64&&t!==(t=n[47].name+"")&&ie(l,t)},d(u){u&&_(e),i=!1,s()}}}function Ye(n){let e,t,l,i,s,r,u,a=n[8],c=[];for(let o=0;o<a.length;o+=1)c[o]=Ze(Te(n,a,o));return{c(){e=V("hr"),t=T(),l=V("div"),i=V("h3"),s=F("Mechanics"),r=T(),u=V("div");for(let o=0;o<c.length;o+=1)c[o].c();this.h()},l(o){e=z(o,"HR",{}),t=N(o),l=z(o,"DIV",{class:!0});var m=H(l);i=z(m,"H3",{class:!0});var d=H(i);s=J(d,"Mechanics"),d.forEach(_),m.forEach(_),r=N(o),u=z(o,"DIV",{class:!0});var w=H(u);for(let I=0;I<c.length;I+=1)c[I].l(w);w.forEach(_),this.h()},h(){S(i,"class","svelte-1rzjw8j"),S(l,"class","comp-modal-header svelte-1rzjw8j"),S(u,"class","triggers")},m(o,m){E(o,e,m),E(o,t,m),E(o,l,m),C(l,i),C(i,s),E(o,r,m),E(o,u,m);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(u,null)},p(o,m){if(m[0]&4352){a=o[8];let d;for(d=0;d<a.length;d+=1){const w=Te(o,a,d);c[d]?c[d].p(w,m):(c[d]=Ze(w),c[d].c(),c[d].m(u,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=a.length}},d(o){o&&_(e),o&&_(t),o&&_(l),o&&_(r),o&&_(u),me(c,o)}}}function Ze(n){let e,t=n[44].name+"",l,i,s;function r(){return n[38](n[44])}return{c(){e=V("div"),l=F(t),this.h()},l(u){e=z(u,"DIV",{class:!0});var a=H(e);l=J(a,t),a.forEach(_),this.h()},h(){S(e,"class","comp-select")},m(u,a){E(u,e,a),C(e,l),i||(s=ee(e,"click",r),i=!0)},p(u,a){n=u,a[0]&256&&t!==(t=n[44].name+"")&&ie(l,t)},d(u){u&&_(e),i=!1,s()}}}function St(n){let e,t,l,i,s,r,u,a,c,o,m,d,w,I,R,M,K,h,O,j;function D(f){n[35](f)}let p={placeholder:"Search..."};n[3]!==void 0&&(p.value=n[3]),a=new pe({props:p}),te.push(()=>le(a,"value",D));let $=n[7].length>0&&Je(n),P=n[6].length>0&&Ue(n),g=n[8].length>0&&Ye(n);return{c(){e=V("div"),t=V("div"),l=T(),i=V("h2"),s=F("Add a Component"),r=T(),u=V("div"),X(a.$$.fragment),o=T(),$&&$.c(),m=T(),P&&P.c(),d=T(),g&&g.c(),w=T(),I=V("hr"),R=T(),M=V("div"),K=F("Cancel"),this.h()},l(f){e=z(f,"DIV",{class:!0});var b=H(e);t=z(b,"DIV",{}),H(t).forEach(_),l=N(b),i=z(b,"H2",{});var Q=H(i);s=J(Q,"Add a Component"),Q.forEach(_),r=N(b),u=z(b,"DIV",{class:!0});var y=H(u);x(a.$$.fragment,y),y.forEach(_),b.forEach(_),o=N(f),$&&$.l(f),m=N(f),P&&P.l(f),d=N(f),g&&g.l(f),w=N(f),I=z(f,"HR",{}),R=N(f),M=z(f,"DIV",{class:!0});var G=H(M);K=J(G,"Cancel"),G.forEach(_),this.h()},h(){S(u,"class","search-bar"),S(e,"class","modal-header-wrapper"),S(M,"class","cancel")},m(f,b){E(f,e,b),C(e,t),C(e,l),C(e,i),C(i,s),C(e,r),C(e,u),Y(a,u,null),E(f,o,b),$&&$.m(f,b),E(f,m,b),P&&P.m(f,b),E(f,d,b),g&&g.m(f,b),E(f,w,b),E(f,I,b),E(f,R,b),E(f,M,b),C(M,K),h=!0,O||(j=ee(M,"click",n[39]),O=!0)},p(f,b){const Q={};!c&&b[0]&8&&(c=!0,Q.value=f[3],ne(()=>c=!1)),a.$set(Q),f[7].length>0?$?$.p(f,b):($=Je(f),$.c(),$.m(m.parentNode,m)):$&&($.d(1),$=null),f[6].length>0?P?P.p(f,b):(P=Ue(f),P.c(),P.m(d.parentNode,d)):P&&(P.d(1),P=null),f[8].length>0?g?g.p(f,b):(g=Ye(f),g.c(),g.m(w.parentNode,w)):g&&(g.d(1),g=null)},i(f){h||(L(a.$$.fragment,f),h=!0)},o(f){W(a.$$.fragment,f),h=!1},d(f){f&&_(e),Z(a),f&&_(o),$&&$.d(f),f&&_(m),P&&P.d(f),f&&_(d),g&&g.d(f),f&&_(w),f&&_(I),f&&_(R),f&&_(M),O=!1,j()}}}function Ht(n){let e,t,l,i,s,r,u,a=n[11](n[9])+"",c,o=(n[9]?" ":": ")+n[0].name,m,d,w,I,R,M,K,h,O,j,D,p;function $(A,v){return A[5]?It:jt}let P=$(n),g=P(n),f=!n[5]&&ye(n);function b(A){n[34](A)}let Q={width:"70%",$$slots:{default:[At]},$$scope:{ctx:n}};n[2]!==void 0&&(Q.open=n[2]),R=new De({props:Q}),te.push(()=>le(R,"open",b));function y(A){n[40](A)}let G={width:"70%",$$slots:{default:[St]},$$scope:{ctx:n}};return n[4]!==void 0&&(G.open=n[4]),h=new De({props:G}),te.push(()=>le(h,"open",y)),{c(){e=V("div"),t=V("div"),g.c(),l=T(),i=V("div"),s=T(),r=V("div"),u=V("span"),c=F(a),m=F(o),d=T(),f&&f.c(),I=T(),X(R.$$.fragment),K=T(),X(h.$$.fragment),this.h()},l(A){e=z(A,"DIV",{class:!0});var v=H(e);t=z(v,"DIV",{draggable:!0,class:!0});var q=H(t);g.l(q),l=N(q),i=z(q,"DIV",{class:!0}),H(i).forEach(_),s=N(q),r=z(q,"DIV",{class:!0});var U=H(r);u=z(U,"SPAN",{class:!0});var B=H(u);c=J(B,a),B.forEach(_),m=J(U,o),U.forEach(_),d=N(q),f&&f.l(q),q.forEach(_),v.forEach(_),I=N(A),x(R.$$.fragment,A),K=N(A),x(h.$$.fragment,A),this.h()},h(){S(i,"class","corner svelte-1rzjw8j"),S(u,"class","svelte-1rzjw8j"),S(r,"class","name svelte-1rzjw8j"),S(t,"draggable","true"),S(t,"class","comp-body svelte-1rzjw8j"),dt(t,"--comp-color",n[13]()),S(e,"class","wrapper svelte-1rzjw8j")},m(A,v){E(A,e,v),C(e,t),g.m(t,null),C(t,l),C(t,i),C(t,s),C(t,r),C(r,u),C(u,c),C(r,m),C(t,d),f&&f.m(t,null),E(A,I,v),Y(R,A,v),E(A,K,v),Y(h,A,v),j=!0,D||(p=[ee(i,"click",ue(n[18])),ee(t,"dragstart",ue(n[25])),ee(t,"dragend",n[26]),ee(t,"click",ue(n[27]))],D=!0)},p(A,v){P!==(P=$(A))&&(g.d(1),g=P(A),g&&(g.c(),L(g,1),g.m(t,l))),(!j||v[0]&512)&&a!==(a=A[11](A[9])+"")&&ie(c,a),(!j||v[0]&513)&&o!==(o=(A[9]?" ":": ")+A[0].name)&&ie(m,o),A[5]?f&&(re(),W(f,1,1,()=>{f=null}),ae()):f?(f.p(A,v),v[0]&32&&L(f,1)):(f=ye(A),f.c(),L(f,1),f.m(t,null));const q={};v[0]&1|v[1]&268435456&&(q.$$scope={dirty:v,ctx:A}),!M&&v[0]&4&&(M=!0,q.open=A[2],ne(()=>M=!1)),R.$set(q);const U={};v[0]&472|v[1]&268435456&&(U.$$scope={dirty:v,ctx:A}),!O&&v[0]&16&&(O=!0,U.open=A[4],ne(()=>O=!1)),h.$set(U)},i(A){j||(L(g),L(f),w&&w.end(1),L(R.$$.fragment,A),L(h.$$.fragment,A),j=!0)},o(A){W(f),w=pt(t,se,{}),W(R.$$.fragment,A),W(h.$$.fragment,A),j=!1},d(A){A&&_(e),g.d(),f&&f.d(),A&&w&&w.end(),A&&_(I),Z(R,A),A&&_(K),Z(h,A),D=!1,ot(p)}}}function Tt(n,e,t){let l;mt(n,wt,k=>t(9,l=k));let{skill:i}=e,{component:s}=e;const r=ht();let u=!1,a=!1,c=!1,o="",m={},d={},w={},I,R,M;rt(()=>{ge.targets.subscribe(k=>t(15,m=k)),ge.conditions.subscribe(k=>t(16,d=k)),ge.mechanics.subscribe(k=>t(17,w=k))});const K=(k=!1)=>{if(k){if(s instanceof ke)return"ðŸš©";if(s instanceof we)return"âš ";if(s instanceof Ee)return"ðŸŽ¯";if(s instanceof de)return"ðŸ”§"}return s instanceof ke?"Trigger":s instanceof we?"Condition":s instanceof Ee?"Target":s instanceof de?"Mechanic":"???"},h=k=>{t(0,s.components=[...s.components,k.new()],s),t(4,a=!1),t(3,o=""),r("save")},O=()=>s instanceof ke?"#0083ef":s instanceof we?"#feac00":s instanceof Ee?"#04af38":s instanceof de?"#ff3a3a":"orange",j=(k,{duration:ve})=>({duration:ve,css:Ie=>`transform: rotate(${180-Et(Ie)*180}deg);`}),D=()=>t(5,c=!c),p=()=>console.log("clicked copy"),$=()=>{i.removeComponent(s),r("update")};function P(k,ve,Ie,Pe){Ie[Pe]=k,t(0,s)}function g(k){Ce.call(this,n,k)}function f(k){Ce.call(this,n,k)}const b=()=>t(4,a=!0),Q=()=>Se.set(s),y=()=>Se.set(void 0),G=()=>t(2,u=!0);function A(k){n.$$.not_equal(s.mana,k)&&(s.mana=k,t(0,s))}function v(k){n.$$.not_equal(s.cooldown,k)&&(s.cooldown=k,t(0,s))}function q(k){n.$$.not_equal(s.iconKey,k)&&(s.iconKey=k,t(0,s))}function U(k){n.$$.not_equal(s.countsAsCast,k)&&(s.countsAsCast=k,t(0,s))}function B(k,ve){n.$$.not_equal(ve.data,k)&&(ve.data=k,t(0,s))}function fe(k){Ce.call(this,n,k)}function be(k){u=k,t(2,u)}function $e(k){o=k,t(3,o)}const ce=k=>h(k.component),he=k=>h(k.component),ct=k=>h(k.component),ut=()=>t(4,a=!1);function _t(k){a=k,t(4,a)}return n.$$set=k=>{"skill"in k&&t(1,i=k.skill),"component"in k&&t(0,s=k.component)},n.$$.update=()=>{n.$$.dirty[0]&229384&&(t(6,I=Object.keys(m).filter(k=>m[k].name.toLowerCase().includes(o.toLowerCase())).sort().map(k=>m[k])),t(7,R=Object.keys(d).filter(k=>d[k].name.toLowerCase().includes(o.toLowerCase())).sort().map(k=>d[k])),t(8,M=Object.keys(w).filter(k=>w[k].name.toLowerCase().includes(o.toLowerCase())).sort().map(k=>w[k]))),n.$$.dirty[0]&1&&s&&r("save"),n.$$.dirty[0]&5&&u&&s&&s.data.filter(k=>k.dataSource).forEach(k=>k.init())},[s,i,u,o,a,c,I,R,M,l,r,K,h,O,j,m,d,w,D,p,$,P,g,f,b,Q,y,G,A,v,q,U,B,fe,be,$e,ce,he,ct,ut,_t]}class ft extends nt{constructor(e){super(),st(this,e,Tt,Ht,it,{skill:1,component:0},null,[-1,-1])}}function Ge(n,e,t){const l=n.slice();return l[17]=e[t],l}function xe(n,e,t){const l=n.slice();return l[20]=e[t],l}function et(n){let e,t,l;return t=new ft({props:{skill:n[1],component:n[20]}}),t.$on("update",n[5]),t.$on("save",n[6]),{c(){e=V("div"),X(t.$$.fragment),this.h()},l(i){e=z(i,"DIV",{class:!0});var s=H(e);x(t.$$.fragment,s),s.forEach(_),this.h()},h(){S(e,"class","widget svelte-ppofb5")},m(i,s){E(i,e,s),Y(t,e,null),l=!0},p(i,s){const r={};s&2&&(r.skill=i[1]),s&2&&(r.component=i[20]),t.$set(r)},i(i){l||(L(t.$$.fragment,i),l=!0)},o(i){W(t.$$.fragment,i),l=!1},d(i){i&&_(e),Z(t)}}}function tt(n){let e,t;return{c(){e=V("div"),t=F("No triggers added yet.")},l(l){e=z(l,"DIV",{});var i=H(e);t=J(i,"No triggers added yet."),i.forEach(_)},m(l,i){E(l,e,i),C(e,t)},d(l){l&&_(e)}}}function lt(n){let e,t=n[17].name+"",l,i,s,r;function u(){return n[11](n[17])}return{c(){e=V("div"),l=F(t),i=T(),this.h()},l(a){e=z(a,"DIV",{class:!0});var c=H(e);l=J(c,t),i=N(c),c.forEach(_),this.h()},h(){S(e,"class","comp-select")},m(a,c){E(a,e,c),C(e,l),C(e,i),s||(r=ee(e,"click",u),s=!0)},p(a,c){n=a,c&8&&t!==(t=n[17].name+"")&&ie(l,t)},d(a){a&&_(e),s=!1,r()}}}function Nt(n){let e,t,l,i,s,r,u,a,c,o,m,d,w,I,R,M,K,h,O,j,D;function p(f){n[10](f)}let $={placeholder:"Search..."};n[0]!==void 0&&($.value=n[0]),a=new pe({props:$}),te.push(()=>le(a,"value",p));let P=n[3],g=[];for(let f=0;f<P.length;f+=1)g[f]=lt(Ge(n,P,f));return{c(){e=V("div"),t=V("div"),l=T(),i=V("h2"),s=F("Select New Trigger"),r=T(),u=V("div"),X(a.$$.fragment),o=T(),m=V("hr"),d=T(),w=V("div");for(let f=0;f<g.length;f+=1)g[f].c();I=T(),R=V("hr"),M=T(),K=V("div"),h=F("Cancel"),this.h()},l(f){e=z(f,"DIV",{class:!0});var b=H(e);t=z(b,"DIV",{}),H(t).forEach(_),l=N(b),i=z(b,"H2",{class:!0});var Q=H(i);s=J(Q,"Select New Trigger"),Q.forEach(_),r=N(b),u=z(b,"DIV",{class:!0});var y=H(u);x(a.$$.fragment,y),y.forEach(_),b.forEach(_),o=N(f),m=z(f,"HR",{}),d=N(f),w=z(f,"DIV",{class:!0});var G=H(w);for(let v=0;v<g.length;v+=1)g[v].l(G);G.forEach(_),I=N(f),R=z(f,"HR",{}),M=N(f),K=z(f,"DIV",{class:!0});var A=H(K);h=J(A,"Cancel"),A.forEach(_),this.h()},h(){S(i,"class","modal-header svelte-ppofb5"),S(u,"class","search-bar"),S(e,"class","modal-header-wrapper"),S(w,"class","triggers"),S(K,"class","cancel")},m(f,b){E(f,e,b),C(e,t),C(e,l),C(e,i),C(i,s),C(e,r),C(e,u),Y(a,u,null),E(f,o,b),E(f,m,b),E(f,d,b),E(f,w,b);for(let Q=0;Q<g.length;Q+=1)g[Q]&&g[Q].m(w,null);E(f,I,b),E(f,R,b),E(f,M,b),E(f,K,b),C(K,h),O=!0,j||(D=ee(K,"click",n[12]),j=!0)},p(f,b){const Q={};if(!c&&b&1&&(c=!0,Q.value=f[0],ne(()=>c=!1)),a.$set(Q),b&24){P=f[3];let y;for(y=0;y<P.length;y+=1){const G=Ge(f,P,y);g[y]?g[y].p(G,b):(g[y]=lt(G),g[y].c(),g[y].m(w,null))}for(;y<g.length;y+=1)g[y].d(1);g.length=P.length}},i(f){O||(L(a.$$.fragment,f),O=!0)},o(f){W(a.$$.fragment,f),O=!1},d(f){f&&_(e),Z(a),f&&_(o),f&&_(m),f&&_(d),f&&_(w),me(g,f),f&&_(I),f&&_(R),f&&_(M),f&&_(K),j=!1,D()}}}function Rt(n){let e,t,l,i,s=n[1].name+"",r,u,a,c,o,m,d,w,I,R,M,K,h,O,j,D,p,$,P,g;document.title=e="ProSkillAPI Dynamic Editor - "+n[1].name;let f=n[1].triggers,b=[];for(let v=0;v<f.length;v+=1)b[v]=et(xe(n,f,v));const Q=v=>W(b[v],1,1,()=>{b[v]=null});let y=n[1].triggers.length==0&&tt();function G(v){n[13](v)}let A={$$slots:{default:[Nt]},$$scope:{ctx:n}};return n[2]!==void 0&&(A.open=n[2]),D=new De({props:A}),te.push(()=>le(D,"open",G)),{c(){t=T(),l=V("div"),i=V("h2"),r=F(s),u=T(),a=V("a"),c=F("edit"),m=T(),d=V("div"),w=V("span"),I=F("new_label"),R=T(),M=V("hr"),K=T(),h=V("div");for(let v=0;v<b.length;v+=1)b[v].c();O=T(),y&&y.c(),j=T(),X(D.$$.fragment),this.h()},l(v){bt("svelte-lamdv3",document.head).forEach(_),t=N(v),l=z(v,"DIV",{class:!0});var U=H(l);i=z(U,"H2",{class:!0});var B=H(i);r=J(B,s),u=N(B),a=z(B,"A",{class:!0,title:!0,href:!0});var fe=H(a);c=J(fe,"edit"),fe.forEach(_),m=N(B),d=z(B,"DIV",{class:!0,title:!0});var be=H(d);w=z(be,"SPAN",{class:!0});var $e=H(w);I=J($e,"new_label"),$e.forEach(_),be.forEach(_),B.forEach(_),R=N(U),M=z(U,"HR",{}),U.forEach(_),K=N(v),h=z(v,"DIV",{class:!0});var ce=H(h);for(let he=0;he<b.length;he+=1)b[he].l(ce);O=N(ce),y&&y.l(ce),ce.forEach(_),j=N(v),x(D.$$.fragment,v),this.h()},h(){S(a,"class","material-symbols-rounded edit-skill chip svelte-ppofb5"),S(a,"title","Edit"),S(a,"href",o="/skill/"+n[1].name+"/edit"),S(w,"class","material-symbols-rounded"),S(d,"class","add-trigger chip svelte-ppofb5"),S(d,"title","Add Trigger"),S(i,"class","svelte-ppofb5"),S(l,"class","header svelte-ppofb5"),S(h,"class","container svelte-ppofb5")},m(v,q){E(v,t,q),E(v,l,q),C(l,i),C(i,r),C(i,u),C(i,a),C(a,c),C(i,m),C(i,d),C(d,w),C(w,I),C(l,R),C(l,M),E(v,K,q),E(v,h,q);for(let U=0;U<b.length;U+=1)b[U]&&b[U].m(h,null);C(h,O),y&&y.m(h,null),E(v,j,q),Y(D,v,q),$=!0,P||(g=ee(d,"click",n[9]),P=!0)},p(v,[q]){if((!$||q&2)&&e!==(e="ProSkillAPI Dynamic Editor - "+v[1].name)&&(document.title=e),(!$||q&2)&&s!==(s=v[1].name+"")&&ie(r,s),(!$||q&2&&o!==(o="/skill/"+v[1].name+"/edit"))&&S(a,"href",o),q&98){f=v[1].triggers;let B;for(B=0;B<f.length;B+=1){const fe=xe(v,f,B);b[B]?(b[B].p(fe,q),L(b[B],1)):(b[B]=et(fe),b[B].c(),L(b[B],1),b[B].m(h,O))}for(re(),B=f.length;B<b.length;B+=1)Q(B);ae()}v[1].triggers.length==0?y||(y=tt(),y.c(),y.m(h,null)):y&&(y.d(1),y=null);const U={};q&8388621&&(U.$$scope={dirty:q,ctx:v}),!p&&q&4&&(p=!0,U.open=v[2],ne(()=>p=!1)),D.$set(U)},i(v){if(!$){for(let q=0;q<f.length;q+=1)L(b[q]);L(D.$$.fragment,v),$=!0}},o(v){b=b.filter(Boolean);for(let q=0;q<b.length;q+=1)W(b[q]);W(D.$$.fragment,v),$=!1},d(v){v&&_(t),v&&_(l),v&&_(K),v&&_(h),me(b,v),y&&y.d(),v&&_(j),Z(D,v),P=!1,g()}}}function Mt(n,e,t){let{data:l}=e,i,s=!1,r="",u,a,c={};rt(()=>{a=ge.triggers.subscribe(O=>t(8,c=O));let h;h=ge.initialized.subscribe(O=>{O&&(h&&h(),m())})}),$t(()=>{a&&a()});const o=h=>{i.triggers.push(h.detail),m(),setTimeout(()=>t(2,s=!1))},m=()=>{t(1,i.triggers=[...i.triggers],i),d()},d=()=>He.set([...kt(He)]),w=()=>t(2,s=!0);function I(h){r=h,t(0,r)}const R=h=>o({detail:h.clone()}),M=()=>t(2,s=!1);function K(h){s=h,t(2,s)}return n.$$set=h=>{"data"in h&&t(7,l=h.data)},n.$$.update=()=>{n.$$.dirty&128&&l&&t(1,i=l.data),n.$$.dirty&257&&t(3,u=Object.keys(c).filter(h=>h.toLowerCase().includes(r.toLowerCase())).sort().map(h=>c[h].component.new()))},[r,i,s,u,o,m,d,l,c,w,I,R,M,K]}class Kt extends nt{constructor(e){super(),st(this,e,Mt,Rt,it,{data:7})}}export{Kt as default};
