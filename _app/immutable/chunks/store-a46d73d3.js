var P=Object.defineProperty;var z=(i,e,s)=>e in i?P(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s;var o=(i,e,s)=>(z(i,typeof e!="symbol"?e+"":e,s),s);import{w as g}from"./index-de6f5c43.js";import{T as l}from"./index-5eabc8c0.js";const Y={INT:/^-?[0-9]+$/,FLOAT:/^-?[0-9]+\.[0-9]+$/,SPACE:/^( +)/},H=i=>{i=i.replace(/\r\n/g,`
`).replace(/\n *\n/g,`
`).replace(/ +\n/g,`
`);const e=new u,s=0,t=i.split(`
`);return e.parse(t,s,0),e},S=i=>{const e=i.match(Y.SPACE);return e?e[1].length:0};class u{constructor(e){o(this,"key");o(this,"data",{});o(this,"put",(e,s)=>{this.data[e]=s});o(this,"has",e=>this.data[e]!==void 0);o(this,"get",(e,s,t)=>((this.data[e]=="[]"||this.data[e]==" []")&&(this.data[e]=JSON.parse(this.data[e].trim())),this.has(e)?t?t(this.data[e]):this.data[e]:s));o(this,"remove",e=>{delete this.data[e]});o(this,"parse",(e,s,t,r)=>{for(r&&(this.key=r);s<e.length&&S(e[s])>=t;){for(;s<e.length&&(S(e[s])!=t||e[s].replace(/ /g,"").charAt(0)=="#"||e[s].indexOf(":")==-1);)s++;if(s==e.length)return s;let c=e[s].substring(t,e[s].indexOf(":"));if(c.match(/^["'].*["']$/)&&(c=c.substring(1,c.length-1)),!this.key&&!r&&(this.key=c),e[s].indexOf(": {}")==e[s].length-4&&e[s].length>=4)this.data[c]={};else if(s<e.length-1&&e[s+1].charAt(t)=="-"&&e[s+1].charAt(t+1)==" "&&S(e[s+1])==t){const n=[];for(;++s<e.length&&e[s].charAt(t)=="-";){let h=e[s].substring(t+2);(h.charAt(0)=="'"||h.charAt(0)=='"')&&(h=h.substring(1,h.length-1).replace(/\\(['"])/,m=>m.replace("\\",""))),n.push(h)}this.data[c]=n,s--}else if(s<e.length-1&&S(e[s+1])>t){s++;const n=S(e[s]),h=new u;s=h.parse(e,s,n,c)-1,this.data[c]=h}else{let n=e[s].substring(e[s].indexOf(":")+2);n.charAt(0)=="'"?n=n.substring(1,n.length-1):isNaN(n)||(Y.INT.test(n)?n=parseInt(n):n=parseFloat(n)),typeof n=="string"&&(n=="false"?n=!1:n=="true"?n=!0:n=n.replace(/\\(['"])/,h=>h.replace("\\",""))),this.data[c]=n}do s++;while(s<e.length&&e[s].replace(/ /g,"").charAt(0)=="#")}return Object.keys(this.data).length==1&&this.key&&this.data[this.key]instanceof u&&(this.data=this.data[this.key].data),s});o(this,"toString",()=>this.toYaml(this.key||this.data.name?"'"+(this.key||this.data.name)+"'":void 0,this.data));o(this,"toYaml",(e,s,t="")=>{let r="";e&&(r+=t+e+`:
`,t+="  ");for(const c of Object.keys(s)){const n=s[c],h=JSON.stringify(n);let m=t+c+": "+h+`
`;if(n!=null){if(n instanceof Object)if(Object.keys(n).includes("toYaml"))if(n instanceof u){r+=n.toYaml("'"+c+"'",n.data,t);continue}else m=n.toYaml(t);else n instanceof Array&&(c!="attributes"?(m=t+c+":",n.length>0&&["string","number"].includes(typeof n[0])?(m+=`
`,n.forEach(b=>m+=t+"- "+JSON.stringify(b)+`
`)):n.length==0&&(m+=` []
`)):m=this.toYaml(c,n,t));r+=m.replaceAll(new RegExp("(?<!\\\\)'","g"),"\\'").replaceAll(new RegExp('(?<!\\\\)"',"g"),"'").replaceAll(/\\"/g,'"')}}return r});this.key=e}}class a{constructor(e,s,t){o(this,"name");o(this,"base");o(this,"scale");o(this,"toYaml",(e="")=>e+this.name.toLowerCase()+"-base: "+this.base+`
`+e+this.name.toLowerCase()+"-scale: "+this.scale+`
`);this.name=e,this.base=s,this.scale=t}}const C=class{constructor(e){o(this,"isClass",!0);o(this,"key",{});o(this,"name");o(this,"prefix","");o(this,"group","class");o(this,"manaName","&2Mana");o(this,"maxLevel",40);o(this,"parent");o(this,"permission",!1);o(this,"expSources",273);o(this,"manaRegen",1);o(this,"health",new a("health",20,1));o(this,"mana",new a("mana",20,1));o(this,"attributes",[]);o(this,"skillTree","Requirement");o(this,"skills",[]);o(this,"icon",{material:"Pumpkin",customModelData:0});o(this,"unusableItems",[]);o(this,"actionBar","");o(this,"serializeYaml",()=>{var t;const e=new u(this.name),s=new u;return s.put("name",this.name),s.put("action-bar",this.actionBar),s.put("prefix",this.prefix),s.put("group",this.group),s.put("mana",this.manaName),s.put("max-level",this.maxLevel),s.put("parent",((t=this.parent)==null?void 0:t.name)||""),s.put("permission",this.permission),s.put("attributes",[this.health,this.mana,...this.attributes]),s.put("mana-regen",this.manaRegen),s.put("tree",this.skillTree),s.put("blacklist",this.unusableItems),s.put("skills",this.skills.map(r=>r.name)),s.put("icon",this.icon.material),s.put("icon-data",this.icon.customModelData),s.put("icon-lore",this.icon.lore),s.put("exp-source",this.expSources),e.data=s.data,e});o(this,"load",e=>{this.name=e.get("name",this.name),this.actionBar=e.get("action-bar",this.actionBar),this.prefix=e.get("prefix",this.prefix),this.group=e.get("group",this.group),this.mana=e.get("mana",this.mana),this.maxLevel=e.get("max-level",this.maxLevel),this.parent=e.get("parent",this.parent,R),this.permission=e.get("permission",this.permission),this.attributes=e.get("attributes",this.attributes,s=>{const t=[],r=s.get("health-base",20),c=s.get("health-scale",1),n=s.get("mana-base",20),h=s.get("mana-scale",1);this.health=new a("health",r,c),this.mana=new a("mana",n,h),s.remove("health-base"),s.remove("health-scale"),s.remove("mana-base"),s.remove("mana-scale");const m={};return Object.keys(s.data).forEach(b=>{const A=b.split("-"),L=C.toProperCase(A[0]);m[L]||(m[L]=new a(L,0,0));const I=m[L];A[1]=="base"&&(I.base=Number.parseFloat(s.data[b])),A[1]=="scale"&&(I.scale=Number.parseFloat(s.data[b]))}),t.push(...Object.values(m)),console.log("att",t),t}),this.manaRegen=e.get("mana-regen",this.manaRegen),this.skillTree=e.get("tree",this.skillTree,C.toProperCase),this.unusableItems=e.get("blacklist",this.unusableItems),this.skills=e.get("skills",this.skills,s=>s.map(t=>$(t)).filter(t=>!!t)),this.icon.material=e.get("icon",this.icon.material,s=>C.toEditorCase(s)),this.icon.customModelData=e.get("icon-data",this.icon.customModelData),this.icon.lore=e.get("icon-lore",this.icon.lore),this.expSources=e.get("exp-source",this.expSources),console.log(this)});this.name=e?e.name:"Class",e!=null&&e.prefix&&(this.prefix=e.prefix),e!=null&&e.group&&(this.group=e.group),e!=null&&e.manaName&&(this.manaName=e.manaName),e!=null&&e.maxLevel&&(this.maxLevel=e.maxLevel),e!=null&&e.parent&&(this.parent=e.parent),e!=null&&e.permission&&(this.permission=e.permission),e!=null&&e.expSources&&(this.expSources=e.expSources),e!=null&&e.health&&(this.health=e.health),e!=null&&e.mana&&(this.mana=e.mana),e!=null&&e.manaRegen&&(this.manaRegen=e.manaRegen),e!=null&&e.attributes&&(this.attributes=e.attributes),e!=null&&e.skillTree&&(this.skillTree=e.skillTree),e!=null&&e.skills&&(this.skills=e.skills),e!=null&&e.icon&&(this.icon=e.icon),e!=null&&e.unusableItems&&(this.unusableItems=e.unusableItems),e!=null&&e.actionBar&&(this.actionBar=e.actionBar)}};let k=C;o(k,"toProperCase",e=>e.replace("_"," ").toLowerCase().replace(/^(.)|\s(.)/g,s=>s.toUpperCase())),o(k,"toEditorCase",e=>(e=e.replace("_"," "),e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase()));class y{constructor(e){this.isSkill=!0,this.key={},this.type="Dynamic",this.maxLevel=5,this.permission=!1,this.levelReq=1,this.levelReqModifier=0,this.cost=1,this.costModifier=0,this.cooldown=0,this.cooldownModifier=0,this.cooldownMessage=!0,this.mana=0,this.manaModifier=0,this.minSpent=0,this.minSpentModifier=0,this.castMessage="&6{player} &2has cast &6{skill}",this.indicator="2D",this.icon={material:"Pumpkin",customModelData:0},this.incompatible=[],this.triggers=[],this.serializeYaml=()=>{const s=new u;return s.data.name=this.name,s},this.name=e?e.name:"Skill",e!=null&&e.type&&(this.type=e.type),e!=null&&e.maxLevel&&(this.maxLevel=e.maxLevel),e!=null&&e.skillReq&&(this.skillReq=e.skillReq),e!=null&&e.skillReqLevel&&(this.skillReqLevel=e.skillReqLevel),e!=null&&e.permission&&(this.permission=e.permission),e!=null&&e.levelReq&&(this.levelReq=e.levelReq),e!=null&&e.levelReqModifier&&(this.levelReqModifier=e.levelReqModifier),e!=null&&e.cost&&(this.cost=e.cost),e!=null&&e.costModifier&&(this.costModifier=e.costModifier),e!=null&&e.cooldown&&(this.cooldown=e.cooldown),e!=null&&e.cooldownModifier&&(this.cooldownModifier=e.cooldownModifier),e!=null&&e.cooldownMessage&&(this.cooldownMessage=e.cooldownMessage),e!=null&&e.mana&&(this.mana=e.mana),e!=null&&e.manaModifier&&(this.manaModifier=e.manaModifier),e!=null&&e.minSpent&&(this.minSpent=e.minSpent),e!=null&&e.minSpentModifier&&(this.minSpentModifier=e.minSpentModifier),e!=null&&e.castMessage&&(this.castMessage=e.castMessage),e!=null&&e.combo&&(this.combo=e.combo),e!=null&&e.indicator&&(this.indicator=e.indicator),e!=null&&e.icon&&(this.icon=e.icon),e!=null&&e.incompatible&&(this.incompatible=e.incompatible),e!=null&&e.triggers&&(this.triggers=e.triggers)}}class f{constructor(e){this.key={},this.isFolder=!0,this.open=!1,this.name="Folder",this.data=[],this.updateParent=s=>{this.parent=s},this.add=s=>{this.data.includes(s)||(s instanceof f&&(x(s,this.data),U(s),s.parent=this),this.data.push(s),this.sort())},this.remove=s=>{this.data=this.data.filter(t=>t!=s),this.sort()},this.sort=()=>{this.data=this.data.sort((s,t)=>{let r=0;return s instanceof f&&(t instanceof f||(r=-100)),s.name.localeCompare(t.name)+r}),N()},this.createFolder=()=>{const s=new f;x(s,this.data),this.data.push(s),this.sort(),s.updateParent(this)},this.deleteFolder=s=>{this.data=this.data.filter(t=>t!=s)},this.contains=s=>{if(this.data.includes(s))return!0;for(const t of this.data.filter(r=>r instanceof f))if(t.contains(s))return!0;return!1},this.getContainingFolder=s=>{if(this.data.includes(s))return this;for(const t of this.data.filter(r=>r instanceof f))if(t.contains(s))return t},e&&(this.data=e,e.forEach(s=>{s instanceof f&&s.isFolder&&s.updateParent(this)}))}}const J=g(),E=g(),_=g(),D=g(!0),d=g(!0),T=g(!0),V=g(!1),p=g([new y({name:"Particle Blast",type:"Dynamic",maxLevel:40,permission:!1,levelReq:1,levelReqModifier:0,cost:0,costModifier:0,cooldown:0,cooldownModifier:0,cooldownMessage:!1,mana:3,manaModifier:0,minSpent:0,minSpentModifier:0,castMessage:"&6{player} &2has cast &6{skill}",indicator:"2D",icon:{material:"Diamond",customModelData:0},triggers:[]}),new y({name:"Poison Dart",type:"Dynamic",maxLevel:40,permission:!1,levelReq:1,levelReqModifier:0,cost:0,costModifier:0,cooldown:0,cooldownModifier:0,cooldownMessage:!1,mana:3,manaModifier:0,minSpent:0,minSpentModifier:0,castMessage:"&6{player} &2has cast &6{skill}",indicator:"2D",icon:{material:"Diamond",customModelData:0},triggers:[]}),new y({name:"Storm",type:"Dynamic",maxLevel:40,permission:!1,levelReq:1,levelReqModifier:0,cost:0,costModifier:0,cooldown:0,cooldownModifier:0,cooldownMessage:!1,mana:3,manaModifier:0,minSpent:0,minSpentModifier:0,castMessage:"&6{player} &2has cast &6{skill}",indicator:"2D",icon:{material:"Diamond",customModelData:0},triggers:[]})]),w=g([new k({name:"Honor Guard",group:"class",manaName:"&2Mana",maxLevel:40,permission:!1,health:new a("Health",20,1),mana:new a("Mana",20,1),manaRegen:1,attributes:[new a("Vitality",2,1)],skillTree:"Requirement",skills:[],icon:{material:"Pumpkin",customModelData:0,lore:["This is a class","Lore line two"]},unusableItems:[]}),new k({name:"Assassin",group:"class",manaName:"&2Mana",maxLevel:40,permission:!1,health:new a("Health",20,1),mana:new a("Mana",20,1),manaRegen:1,attributes:[new a("Vitality",2,1),new a("Bravery",2,1)],skillTree:"Requirement",skills:[l(p)[0],l(p)[1]],icon:{material:"Pumpkin",customModelData:0,lore:['This is" a class']},unusableItems:[]}),new k({name:"Archer",group:"class",manaName:"&2Mana",maxLevel:40,permission:!1,health:new a("Health",20,1),mana:new a("Mana",20,1),manaRegen:1,attributes:[new a("Vitality",2,1)],skillTree:"Requirement",skills:[],icon:{material:"Pumpkin",customModelData:0,lore:["This is a class"]},unusableItems:[]})]),M=g([new f([new f([l(w)[0]])])]),v=g([new f([new f([l(p)[0]])])]),ee=(i,e)=>{J.set(i),E.set(e)},se=()=>{l(D)&&(l(E)=="class"?w.set(l(w)):p.set(l(p)),N())},ie=()=>D.set(!l(D)),te=()=>D.set(!1),ne=()=>T.set(!0),oe=()=>T.set(!1),le=i=>V.set(i),R=i=>{for(const e of l(w))if(e.name==i)return e},O=i=>!!R(i),B=i=>{const e=l(w),s=new k({name:i||"Class "+(e.length+1)});return e.push(s),w.set(e),s},$=i=>{for(const e of l(p))if(e.name==i)return e},re=i=>{const e=l(p),s=new y({name:i||"Skill "+(e.length+1)});return e.push(s),p.set(e),s},ce=i=>{const e=l(M);e.includes(i)||(x(i,e),e.push(i),e.sort((s,t)=>s.name.localeCompare(t.name)),M.set(e))},he=i=>{const e=l(v);e.includes(i)||(x(i,e),e.push(i),e.sort((s,t)=>s.name.localeCompare(t.name)),v.set(e))},x=(i,e)=>{const s=i.name;let t=1;for(;e.filter(r=>r instanceof f&&r.name==i.name).length>=1;)i.name=s+" ("+t+++")"},ae=i=>{if(i.parent)i.parent.deleteFolder(i),N();else if(l(T)){const e=l(M).filter(s=>s!=i);M.set(e)}else{const e=l(v).filter(s=>s!=i);v.set(e)}},N=()=>{l(D)&&(l(T)?(M.set(q(l(M))),w.set(q(l(w)))):(v.set(q(l(v))),p.set(q(l(p)))))},me=()=>{const i=l(w),e=l(p),s=new u,t=new u;s.put("loaded",!1),t.put("loaded",!1),i.forEach(r=>s.put(r.name,r.serializeYaml())),i.length>0&&localStorage.setItem("classData",s.toString()),e.length>0&&localStorage.setItem("skillData",t.toString()),console.log(t.toString())},q=i=>i.sort((e,s)=>e.name.localeCompare(s.name)),U=i=>{const e=l(M),s=l(v);e.includes(i)&&M.set(e.filter(t=>t!=i)),s.includes(i)&&v.set(s.filter(t=>t!=i))},fe=i=>{if(i instanceof f)return i.parent;const e=i instanceof k?l(M):l(v);for(const s of e){const t=s.getContainingFolder(i);if(t)return t}},G=i=>{},F=i=>{alert(1);const e=H(i);let s;if(alert(2),e.key&&!e.data[e.key]){alert(3);const t=e.key;console.log(t,O(t),R(t)),alert(4),s=O(t)?R(t):B(t),alert(5),s.load(e),alert(6),alert(JSON.stringify(s));return}for(const t in e.data)t!="loaded"&&e.data[t]instanceof u&&!O(t)&&(s=O(t)?R(t):B(t),s.load(e.data[t]),console.log(s))},Q=i=>{var s;const e=(s=i.target)==null?void 0:s.result;e&&F(e)},W=i=>{var s;(s=i.target)!=null&&s.result},X=i=>{var s;const e=(s=i.target)==null?void 0:s.result;e&&(e.indexOf("global:")>=0||e.indexOf("components:")>=0||e.indexOf("group:")==-1&&e.indexOf("combo:")==-1&&e.indexOf("skills:")==-1||F(e),document.activeElement.blur())},ue=i=>{i.indexOf("global:")>=0||(i.indexOf("components:")>=0||i.indexOf("group:")==-1&&i.indexOf("combo:")==-1&&i.indexOf("skills:")==-1?G(i.replace(`loaded: false
`,"")):F(i.replace(`loaded: false
`,"")))},pe=i=>{const e=new FileReader;i.name.indexOf("skills")==0?e.onload=W:i.name.indexOf("classes")==0?e.onload=Q:e.onload=X,e.readAsText(i)};export{D as A,V as B,se as C,me as D,ee as E,f as P,pe as a,J as b,d as c,_ as d,ce as e,he as f,fe as g,ae as h,T as i,ne as j,oe as k,ue as l,M as m,w as n,v as o,p,k as q,U as r,le as s,y as t,N as u,B as v,re as w,te as x,E as y,ie as z};
