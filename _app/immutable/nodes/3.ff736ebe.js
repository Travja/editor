import{c as Nt,q as Tt,h as ze,k as Pe,R as be,L as ke,Y as At,M as Ht}from"../chunks/store.0c2bb9a5.js";import{I as Me,S as Ee,i as ye,s as Ce,P as Rt,k as C,a as N,l as D,m as M,c as T,h as p,n as q,p as Be,b as w,C as y,E as F,R as se,U as Ot,V as Lt,W as Yt,g as P,X as De,a2 as _e,d as H,F as he,q as j,r as K,u as x,_ as me,w as ee,M as ie,y as G,z as X,A as Q,N as re,B as U,Q as ne,v as te,f as le,a6 as Ie,e as ae,x as Oe,O as St,o as Ge,a5 as Qe,T as Fe,Z as jt,H as Ze,G as Ye,Y as Vt,a0 as Pt,a1 as Mt,a9 as Kt}from"../chunks/index.e9b9921d.js";import{r as Ke}from"../chunks/index.d7eb2526.js";import{M as je,b as $e,P as Ae,a as He,d as Re,u as Wt,o as We}from"../chunks/modal-service.987efec8.js";import{s as fe,P as we,T as Ue,b as zt}from"../chunks/Toggle.ff516c6a.js";const Bt=!1;async function Ft({params:i}){const e=i.id;let l,t;if(i.type=="class")throw Ke(302,`/${i.type}/${i.id}/edit`);if(i.type=="skill"){for(const n of Me(ze))if(t||(t=n),n.name==e){l=n;break}}if(l)return Nt.set(l),Tt.set(i.type=="class"),{data:l};throw t?Ke(302,`/${i.type}/${t.name}`):Ke(302,"/")}const Rl=Object.freeze(Object.defineProperty({__proto__:null,load:Ft,ssr:Bt},Symbol.toStringTag,{value:"Module"}));function Je(i){let e,l;return{c(){e=C("span"),l=j(i[1]),this.h()},l(t){e=D(t,"SPAN",{class:!0});var n=M(e);l=K(n,i[1]),n.forEach(p),this.h()},h(){q(e,"class","material-symbols-rounded")},m(t,n){w(t,e,n),y(e,l)},p(t,n){n&2&&x(l,t[1])},d(t){t&&p(e)}}}function Gt(i){let e,l,t,n,o,s,f=i[1]&&Je(i);const a=i[5].default,c=Rt(a,i,i[4],null);return{c(){e=C("div"),f&&f.c(),l=N(),c&&c.c(),this.h()},l(r){e=D(r,"DIV",{class:!0,title:!0});var u=M(e);f&&f.l(u),l=T(u),c&&c.l(u),u.forEach(p),this.h()},h(){q(e,"class","control svelte-1n1iox0"),q(e,"title",i[0]),Be(e,"--color",i[2])},m(r,u){w(r,e,u),f&&f.m(e,null),y(e,l),c&&c.m(e,null),n=!0,o||(s=[F(e,"click",se(i[6])),F(e,"keypress",se(i[3]))],o=!0)},p(r,[u]){r[1]?f?f.p(r,u):(f=Je(r),f.c(),f.m(e,l)):f&&(f.d(1),f=null),c&&c.p&&(!n||u&16)&&Ot(c,a,r,r[4],n?Yt(a,r[4],u,null):Lt(r[4]),null),(!n||u&1)&&q(e,"title",r[0]),u&4&&Be(e,"--color",r[2])},i(r){n||(P(c,r),De(()=>{n&&(t||(t=_e(e,fe,{},!0)),t.run(1))}),n=!0)},o(r){H(c,r),t||(t=_e(e,fe,{},!1)),t.run(0),n=!1},d(r){r&&p(e),f&&f.d(),c&&c.d(r),r&&t&&t.end(),o=!1,he(s)}}}function Qt(i,e,l){let{$$slots:t={},$$scope:n}=e,{title:o=""}=e,{icon:s=""}=e,{color:f="red"}=e;const a=r=>r.key==="Enter"&&r.target.click();function c(r){me.call(this,i,r)}return i.$$set=r=>{"title"in r&&l(0,o=r.title),"icon"in r&&l(1,s=r.icon),"color"in r&&l(2,f=r.color),"$$scope"in r&&l(4,n=r.$$scope)},[o,s,f,a,n,t,c]}class Le extends Ee{constructor(e){super(),ye(this,e,Qt,Gt,Ce,{title:0,icon:1,color:2})}}function xe(i,e,l){const t=i.slice();return t[10]=e[l],t[11]=e,t[12]=l,t}function et(i){let e,l=i[0].description+"",t;return{c(){e=C("div"),t=j(l),this.h()},l(n){e=D(n,"DIV",{class:!0});var o=M(e);t=K(o,l),o.forEach(p),this.h()},h(){q(e,"class","modal-desc svelte-yfnt3o")},m(n,o){w(n,e,o),y(e,t)},p(n,o){o&1&&l!==(l=n[0].description+"")&&x(t,l)},d(n){n&&p(e)}}}function Ut(i){let e,l,t;function n(s){i[4](s)}let o={label:"Icon Key",tooltip:'[icon-key] The key used by the component in the Icon Lore. If this is set to "example" and has a value name of "value", it can be referenced using the string "{attr:example.value}"'};return i[0].iconKey!==void 0&&(o.value=i[0].iconKey),e=new we({props:o}),ee.push(()=>ie(e,"value",n)),{c(){G(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,f){Q(e,s,f),t=!0},p(s,f){const a={};!l&&f&1&&(l=!0,a.value=s[0].iconKey,re(()=>l=!1)),e.$set(a)},i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){H(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function Xt(i){let e,l,t,n;return e=new we({props:{label:"Mana",tooltip:"[mana] Whether this trigger requires the mana cost to activate",$$slots:{default:[Zt]},$$scope:{ctx:i}}}),t=new we({props:{label:"Cooldown",tooltip:"[cooldown] Whether this trigger requires to be off cooldown to activate",$$slots:{default:[Jt]},$$scope:{ctx:i}}}),{c(){G(e.$$.fragment),l=N(),G(t.$$.fragment)},l(o){X(e.$$.fragment,o),l=T(o),X(t.$$.fragment,o)},m(o,s){Q(e,o,s),w(o,l,s),Q(t,o,s),n=!0},p(o,s){const f={};s&8193&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const a={};s&8193&&(a.$$scope={dirty:s,ctx:o}),t.$set(a)},i(o){n||(P(e.$$.fragment,o),P(t.$$.fragment,o),n=!0)},o(o){H(e.$$.fragment,o),H(t.$$.fragment,o),n=!1},d(o){U(e,o),o&&p(l),U(t,o)}}}function Zt(i){let e,l,t;function n(s){i[2](s)}let o={};return i[0].mana!==void 0&&(o.data=i[0].mana),e=new Ue({props:o}),ee.push(()=>ie(e,"data",n)),{c(){G(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,f){Q(e,s,f),t=!0},p(s,f){const a={};!l&&f&1&&(l=!0,a.data=s[0].mana,re(()=>l=!1)),e.$set(a)},i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){H(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function Jt(i){let e,l,t;function n(s){i[3](s)}let o={};return i[0].cooldown!==void 0&&(o.data=i[0].cooldown),e=new Ue({props:o}),ee.push(()=>ie(e,"data",n)),{c(){G(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,f){Q(e,s,f),t=!0},p(s,f){const a={};!l&&f&1&&(l=!0,a.data=s[0].cooldown,re(()=>l=!1)),e.$set(a)},i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){H(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function tt(i){let e,l;return e=new we({props:{label:"Counts as Cast",tooltip:'[counts] Whether this mechanic running treats the skill as "casted" and will consume mana and start the cooldown. Set to false if it is a mechanic applled when the skill fails such as cleanup or an error message"',$$slots:{default:[xt]},$$scope:{ctx:i}}}),{c(){G(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,n){Q(e,t,n),l=!0},p(t,n){const o={};n&8193&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(P(e.$$.fragment,t),l=!0)},o(t){H(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function xt(i){let e,l,t;function n(s){i[5](s)}let o={};return i[0].countsAsCast!==void 0&&(o.data=i[0].countsAsCast),e=new Ue({props:o}),ee.push(()=>ie(e,"data",n)),{c(){G(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,f){Q(e,s,f),t=!0},p(s,f){const a={};!l&&f&1&&(l=!0,a.data=s[0].countsAsCast,re(()=>l=!1)),e.$set(a)},i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){H(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function lt(i){let e,l,t,n;function o(a){i[6](a,i[10])}var s=i[10].component;function f(a){let c={name:a[10].name,tooltip:(a[10].key?"["+a[10].key+"] ":"")+a[10].tooltip,multiple:a[10].multiple};return a[10].data!==void 0&&(c.data=a[10].data),{props:c}}return s&&(e=Oe(s,f(i)),ee.push(()=>ie(e,"data",o)),e.$on("save",i[7])),{c(){e&&G(e.$$.fragment),t=ae()},l(a){e&&X(e.$$.fragment,a),t=ae()},m(a,c){e&&Q(e,a,c),w(a,t,c),n=!0},p(a,c){i=a;const r={};if(c&1&&(r.name=i[10].name),c&1&&(r.tooltip=(i[10].key?"["+i[10].key+"] ":"")+i[10].tooltip),c&1&&(r.multiple=i[10].multiple),!l&&c&1&&(l=!0,r.data=i[10].data,re(()=>l=!1)),c&1&&s!==(s=i[10].component)){if(e){te();const u=e;H(u.$$.fragment,1,0,()=>{U(u,1)}),le()}s?(e=Oe(s,f(i)),ee.push(()=>ie(e,"data",o)),e.$on("save",i[7]),G(e.$$.fragment),P(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}else s&&e.$set(r)},i(a){n||(e&&P(e.$$.fragment,a),n=!0)},o(a){e&&H(e.$$.fragment,a),n=!1},d(a){a&&p(t),e&&U(e,a)}}}function nt(i){let e=i[10].meetsRequirements(i[0]),l,t,n=e&&lt(i);return{c(){n&&n.c(),l=ae()},l(o){n&&n.l(o),l=ae()},m(o,s){n&&n.m(o,s),w(o,l,s),t=!0},p(o,s){s&1&&(e=o[10].meetsRequirements(o[0])),e?n?(n.p(o,s),s&1&&P(n,1)):(n=lt(o),n.c(),P(n,1),n.m(l.parentNode,l)):n&&(te(),H(n,1,1,()=>{n=null}),le())},i(o){t||(P(n),t=!0)},o(o){H(n),t=!1},d(o){n&&n.d(o),o&&p(l)}}}function el(i){let e,l,t=i[0].name+"",n,o,s,f,a,c,r,u,_,h,k,V=i[0].description&&et(i);const b=[Xt,Ut],S=[];function g(v,E){return v[0]instanceof Pe&&v[0].name!="Cast"&&v[0].name!="Initialize"&&v[0].name!="Cleanup"?0:v[0]instanceof Ae||v[0]instanceof He||v[0]instanceof $e?1:-1}~(r=g(i))&&(u=S[r]=b[r](i));let $=i[0]instanceof $e&&tt(i),O=i[0].data,L=[];for(let v=0;v<O.length;v+=1)L[v]=nt(xe(i,O,v));const Z=v=>H(L[v],1,1,()=>{L[v]=null});return{c(){e=C("h2"),l=C("span"),n=j(t),o=N(),V&&V.c(),s=N(),f=C("hr"),a=N(),c=C("div"),u&&u.c(),_=N(),$&&$.c(),h=N();for(let v=0;v<L.length;v+=1)L[v].c();this.h()},l(v){e=D(v,"H2",{class:!0});var E=M(e);l=D(E,"SPAN",{class:!0});var m=M(l);n=K(m,t),m.forEach(p),E.forEach(p),o=T(v),V&&V.l(v),s=T(v),f=D(v,"HR",{}),a=T(v),c=D(v,"DIV",{class:!0});var d=M(c);u&&u.l(d),_=T(d),$&&$.l(d),h=T(d);for(let I=0;I<L.length;I+=1)L[I].l(d);d.forEach(p),this.h()},h(){q(l,"class","svelte-yfnt3o"),q(e,"class","svelte-yfnt3o"),ne(e,"deprecated",i[0].isDeprecated),q(c,"class","component-entry svelte-yfnt3o")},m(v,E){w(v,e,E),y(e,l),y(l,n),w(v,o,E),V&&V.m(v,E),w(v,s,E),w(v,f,E),w(v,a,E),w(v,c,E),~r&&S[r].m(c,null),y(c,_),$&&$.m(c,null),y(c,h);for(let m=0;m<L.length;m+=1)L[m]&&L[m].m(c,null);k=!0},p(v,E){(!k||E&1)&&t!==(t=v[0].name+"")&&x(n,t),(!k||E&1)&&ne(e,"deprecated",v[0].isDeprecated),v[0].description?V?V.p(v,E):(V=et(v),V.c(),V.m(s.parentNode,s)):V&&(V.d(1),V=null);let m=r;if(r=g(v),r===m?~r&&S[r].p(v,E):(u&&(te(),H(S[m],1,1,()=>{S[m]=null}),le()),~r?(u=S[r],u?u.p(v,E):(u=S[r]=b[r](v),u.c()),P(u,1),u.m(c,_)):u=null),v[0]instanceof $e?$?($.p(v,E),E&1&&P($,1)):($=tt(v),$.c(),P($,1),$.m(c,h)):$&&(te(),H($,1,1,()=>{$=null}),le()),E&1){O=v[0].data;let d;for(d=0;d<O.length;d+=1){const I=xe(v,O,d);L[d]?(L[d].p(I,E),P(L[d],1)):(L[d]=nt(I),L[d].c(),P(L[d],1),L[d].m(c,null))}for(te(),d=O.length;d<L.length;d+=1)Z(d);le()}},i(v){if(!k){P(u),P($);for(let E=0;E<O.length;E+=1)P(L[E]);k=!0}},o(v){H(u),H($),L=L.filter(Boolean);for(let E=0;E<L.length;E+=1)H(L[E]);k=!1},d(v){v&&p(e),v&&p(o),V&&V.d(v),v&&p(s),v&&p(f),v&&p(a),v&&p(c),~r&&S[r].d(),$&&$.d(),Ie(L,v)}}}function tl(i){let e,l,t;function n(s){i[8](s)}let o={width:"70%",$$slots:{default:[el]},$$scope:{ctx:i}};return i[1]!==void 0&&(o.open=i[1]),e=new je({props:o}),ee.push(()=>ie(e,"open",n)),e.$on("close",i[9]),{c(){G(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,f){Q(e,s,f),t=!0},p(s,[f]){const a={};f&8193&&(a.$$scope={dirty:f,ctx:s}),!l&&f&2&&(l=!0,a.open=s[1],re(()=>l=!1)),e.$set(a)},i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){H(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function ll(i,e,l){let{data:t=void 0}=e,n=!0;function o(h){i.$$.not_equal(t.mana,h)&&(t.mana=h,l(0,t))}function s(h){i.$$.not_equal(t.cooldown,h)&&(t.cooldown=h,l(0,t))}function f(h){i.$$.not_equal(t.iconKey,h)&&(t.iconKey=h,l(0,t))}function a(h){i.$$.not_equal(t.countsAsCast,h)&&(t.countsAsCast=h,l(0,t))}function c(h,k){i.$$.not_equal(k.data,h)&&(k.data=h,l(0,t))}function r(h){me.call(this,i,h)}function u(h){n=h,l(1,n)}function _(h){me.call(this,i,h)}return i.$$set=h=>{"data"in h&&l(0,t=h.data)},i.$$.update=()=>{i.$$.dirty&3&&n&&t&&t.data.filter(h=>h.dataSource).forEach(h=>h.init())},[t,n,o,s,f,a,c,r,u,_]}class nl extends Ee{constructor(e){super(),ye(this,e,ll,tl,Ce,{data:0})}}function it(i,e,l){const t=i.slice();return t[22]=e[l],t}function st(i,e,l){const t=i.slice();return t[25]=e[l],t}function ot(i,e,l){const t=i.slice();return t[28]=e[l],t}function rt(i){let e,l,t,n,o,s,f,a=i[1],c=[];for(let r=0;r<a.length;r+=1)c[r]=at(ot(i,a,r));return{c(){e=C("hr"),l=N(),t=C("div"),n=C("h3"),o=j("Targets"),s=N(),f=C("div");for(let r=0;r<c.length;r+=1)c[r].c();this.h()},l(r){e=D(r,"HR",{}),l=T(r),t=D(r,"DIV",{class:!0});var u=M(t);n=D(u,"H3",{class:!0});var _=M(n);o=K(_,"Targets"),_.forEach(p),u.forEach(p),s=T(r),f=D(r,"DIV",{class:!0});var h=M(f);for(let k=0;k<c.length;k+=1)c[k].l(h);h.forEach(p),this.h()},h(){q(n,"class","svelte-14lpuu9"),q(t,"class","comp-modal-header svelte-14lpuu9"),q(f,"class","triggers")},m(r,u){w(r,e,u),w(r,l,u),w(r,t,u),y(t,n),y(n,o),w(r,s,u),w(r,f,u);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(f,null)},p(r,u){if(u[0]&18){a=r[1];let _;for(_=0;_<a.length;_+=1){const h=ot(r,a,_);c[_]?c[_].p(h,u):(c[_]=at(h),c[_].c(),c[_].m(f,null))}for(;_<c.length;_+=1)c[_].d(1);c.length=a.length}},d(r){r&&p(e),r&&p(l),r&&p(t),r&&p(s),r&&p(f),Ie(c,r)}}}function il(i){let e=i[28].name+"",l;return{c(){l=j(e)},l(t){l=K(t,e)},m(t,n){w(t,l,n)},p(t,n){n[0]&2&&e!==(e=t[28].name+"")&&x(l,e)},d(t){t&&p(l)}}}function sl(i){let e,l=i[28].name+"",t;return{c(){e=C("s"),t=j(l)},l(n){e=D(n,"S",{});var o=M(e);t=K(o,l),o.forEach(p)},m(n,o){w(n,e,o),y(e,t)},p(n,o){o[0]&2&&l!==(l=n[28].name+"")&&x(t,l)},d(n){n&&p(e)}}}function at(i){let e,l,t,n,o;function s(u,_){return _[0]&2&&(l=null),l==null&&(l=!!u[28].component.new().isDeprecated),l?sl:il}let f=s(i,[-1,-1]),a=f(i);function c(){return i[10](i[28])}function r(...u){return i[11](i[28],...u)}return{c(){e=C("div"),a.c(),t=N(),this.h()},l(u){e=D(u,"DIV",{class:!0});var _=M(e);a.l(_),t=T(_),_.forEach(p),this.h()},h(){q(e,"class","comp-select")},m(u,_){w(u,e,_),a.m(e,null),y(e,t),n||(o=[F(e,"click",c),F(e,"keypress",r)],n=!0)},p(u,_){i=u,f===(f=s(i,_))&&a?a.p(i,_):(a.d(1),a=f(i),a&&(a.c(),a.m(e,t)))},d(u){u&&p(e),a.d(),n=!1,he(o)}}}function ft(i){let e,l,t,n,o,s,f,a=i[2],c=[];for(let r=0;r<a.length;r+=1)c[r]=ct(st(i,a,r));return{c(){e=C("hr"),l=N(),t=C("div"),n=C("h3"),o=j("Conditions"),s=N(),f=C("div");for(let r=0;r<c.length;r+=1)c[r].c();this.h()},l(r){e=D(r,"HR",{}),l=T(r),t=D(r,"DIV",{class:!0});var u=M(t);n=D(u,"H3",{class:!0});var _=M(n);o=K(_,"Conditions"),_.forEach(p),u.forEach(p),s=T(r),f=D(r,"DIV",{class:!0});var h=M(f);for(let k=0;k<c.length;k+=1)c[k].l(h);h.forEach(p),this.h()},h(){q(n,"class","svelte-14lpuu9"),q(t,"class","comp-modal-header svelte-14lpuu9"),q(f,"class","triggers")},m(r,u){w(r,e,u),w(r,l,u),w(r,t,u),y(t,n),y(n,o),w(r,s,u),w(r,f,u);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(f,null)},p(r,u){if(u[0]&20){a=r[2];let _;for(_=0;_<a.length;_+=1){const h=st(r,a,_);c[_]?c[_].p(h,u):(c[_]=ct(h),c[_].c(),c[_].m(f,null))}for(;_<c.length;_+=1)c[_].d(1);c.length=a.length}},d(r){r&&p(e),r&&p(l),r&&p(t),r&&p(s),r&&p(f),Ie(c,r)}}}function ol(i){let e=i[25].name+"",l;return{c(){l=j(e)},l(t){l=K(t,e)},m(t,n){w(t,l,n)},p(t,n){n[0]&4&&e!==(e=t[25].name+"")&&x(l,e)},d(t){t&&p(l)}}}function rl(i){let e,l=i[25].name+"",t;return{c(){e=C("s"),t=j(l)},l(n){e=D(n,"S",{});var o=M(e);t=K(o,l),o.forEach(p)},m(n,o){w(n,e,o),y(e,t)},p(n,o){o[0]&4&&l!==(l=n[25].name+"")&&x(t,l)},d(n){n&&p(e)}}}function ct(i){let e,l,t,n,o;function s(u,_){return _[0]&4&&(l=null),l==null&&(l=!!u[25].component.new().isDeprecated),l?rl:ol}let f=s(i,[-1,-1]),a=f(i);function c(){return i[12](i[25])}function r(...u){return i[13](i[25],...u)}return{c(){e=C("div"),a.c(),t=N(),this.h()},l(u){e=D(u,"DIV",{class:!0});var _=M(e);a.l(_),t=T(_),_.forEach(p),this.h()},h(){q(e,"class","comp-select")},m(u,_){w(u,e,_),a.m(e,null),y(e,t),n||(o=[F(e,"click",c),F(e,"keypress",r)],n=!0)},p(u,_){i=u,f===(f=s(i,_))&&a?a.p(i,_):(a.d(1),a=f(i),a&&(a.c(),a.m(e,t)))},d(u){u&&p(e),a.d(),n=!1,he(o)}}}function ut(i){let e,l,t,n,o,s,f,a=i[3],c=[];for(let r=0;r<a.length;r+=1)c[r]=_t(it(i,a,r));return{c(){e=C("hr"),l=N(),t=C("div"),n=C("h3"),o=j("Mechanics"),s=N(),f=C("div");for(let r=0;r<c.length;r+=1)c[r].c();this.h()},l(r){e=D(r,"HR",{}),l=T(r),t=D(r,"DIV",{class:!0});var u=M(t);n=D(u,"H3",{class:!0});var _=M(n);o=K(_,"Mechanics"),_.forEach(p),u.forEach(p),s=T(r),f=D(r,"DIV",{class:!0});var h=M(f);for(let k=0;k<c.length;k+=1)c[k].l(h);h.forEach(p),this.h()},h(){q(n,"class","svelte-14lpuu9"),q(t,"class","comp-modal-header svelte-14lpuu9"),q(f,"class","triggers")},m(r,u){w(r,e,u),w(r,l,u),w(r,t,u),y(t,n),y(n,o),w(r,s,u),w(r,f,u);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(f,null)},p(r,u){if(u[0]&24){a=r[3];let _;for(_=0;_<a.length;_+=1){const h=it(r,a,_);c[_]?c[_].p(h,u):(c[_]=_t(h),c[_].c(),c[_].m(f,null))}for(;_<c.length;_+=1)c[_].d(1);c.length=a.length}},d(r){r&&p(e),r&&p(l),r&&p(t),r&&p(s),r&&p(f),Ie(c,r)}}}function al(i){let e=i[22].name+"",l;return{c(){l=j(e)},l(t){l=K(t,e)},m(t,n){w(t,l,n)},p(t,n){n[0]&8&&e!==(e=t[22].name+"")&&x(l,e)},d(t){t&&p(l)}}}function fl(i){let e,l=i[22].name+"",t;return{c(){e=C("s"),t=j(l)},l(n){e=D(n,"S",{});var o=M(e);t=K(o,l),o.forEach(p)},m(n,o){w(n,e,o),y(e,t)},p(n,o){o[0]&8&&l!==(l=n[22].name+"")&&x(t,l)},d(n){n&&p(e)}}}function _t(i){let e,l,t,n,o;function s(u,_){return _[0]&8&&(l=null),l==null&&(l=!!u[22].component.new().isDeprecated),l?fl:al}let f=s(i,[-1,-1]),a=f(i);function c(){return i[14](i[22])}function r(...u){return i[15](i[22],...u)}return{c(){e=C("div"),a.c(),t=N(),this.h()},l(u){e=D(u,"DIV",{class:!0});var _=M(e);a.l(_),t=T(_),_.forEach(p),this.h()},h(){q(e,"class","comp-select")},m(u,_){w(u,e,_),a.m(e,null),y(e,t),n||(o=[F(e,"click",c),F(e,"keypress",r)],n=!0)},p(u,_){i=u,f===(f=s(i,_))&&a?a.p(i,_):(a.d(1),a=f(i),a&&(a.c(),a.m(e,t)))},d(u){u&&p(e),a.d(),n=!1,he(o)}}}function cl(i){let e,l,t,n,o,s,f,a,c,r,u,_,h,k,V,b,S,g,$,O;function L(d){i[9](d)}let Z={placeholder:"Search..."};i[0]!==void 0&&(Z.value=i[0]),a=new we({props:Z}),ee.push(()=>ie(a,"value",L));let v=i[1].length>0&&rt(i),E=i[2].length>0&&ft(i),m=i[3].length>0&&ut(i);return{c(){e=C("div"),l=C("div"),t=N(),n=C("h2"),o=j("Add a Component"),s=N(),f=C("div"),G(a.$$.fragment),r=N(),v&&v.c(),u=N(),E&&E.c(),_=N(),m&&m.c(),h=N(),k=C("hr"),V=N(),b=C("div"),S=j("Cancel"),this.h()},l(d){e=D(d,"DIV",{class:!0});var I=M(e);l=D(I,"DIV",{}),M(l).forEach(p),t=T(I),n=D(I,"H2",{});var W=M(n);o=K(W,"Add a Component"),W.forEach(p),s=T(I),f=D(I,"DIV",{class:!0});var z=M(f);X(a.$$.fragment,z),z.forEach(p),I.forEach(p),r=T(d),v&&v.l(d),u=T(d),E&&E.l(d),_=T(d),m&&m.l(d),h=T(d),k=D(d,"HR",{}),V=T(d),b=D(d,"DIV",{class:!0});var B=M(b);S=K(B,"Cancel"),B.forEach(p),this.h()},h(){q(f,"class","search-bar"),q(e,"class","modal-header-wrapper"),q(b,"class","cancel")},m(d,I){w(d,e,I),y(e,l),y(e,t),y(e,n),y(n,o),y(e,s),y(e,f),Q(a,f,null),w(d,r,I),v&&v.m(d,I),w(d,u,I),E&&E.m(d,I),w(d,_,I),m&&m.m(d,I),w(d,h,I),w(d,k,I),w(d,V,I),w(d,b,I),y(b,S),g=!0,$||(O=[F(b,"click",i[16]),F(b,"keypress",i[17])],$=!0)},p(d,I){const W={};!c&&I[0]&1&&(c=!0,W.value=d[0],re(()=>c=!1)),a.$set(W),d[1].length>0?v?v.p(d,I):(v=rt(d),v.c(),v.m(u.parentNode,u)):v&&(v.d(1),v=null),d[2].length>0?E?E.p(d,I):(E=ft(d),E.c(),E.m(_.parentNode,_)):E&&(E.d(1),E=null),d[3].length>0?m?m.p(d,I):(m=ut(d),m.c(),m.m(h.parentNode,h)):m&&(m.d(1),m=null)},i(d){g||(P(a.$$.fragment,d),g=!0)},o(d){H(a.$$.fragment,d),g=!1},d(d){d&&p(e),U(a),d&&p(r),v&&v.d(d),d&&p(u),E&&E.d(d),d&&p(_),m&&m.d(d),d&&p(h),d&&p(k),d&&p(V),d&&p(b),$=!1,he(O)}}}function ul(i){let e,l;return e=new je({props:{width:"70%",open:!0,$$slots:{default:[cl]},$$scope:{ctx:i}}}),e.$on("close",Re),{c(){G(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,n){Q(e,t,n),l=!0},p(t,n){const o={};n[0]&15|n[1]&1&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(P(e.$$.fragment,t),l=!0)},o(t){H(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function _l(i,e,l){let{data:t}=e,n="",o={},s={},f={},a,c,r,u,_,h;const k=St();Ge(()=>{u=be.targets.subscribe(m=>l(6,o=m)),_=be.conditions.subscribe(m=>l(7,s=m)),h=be.mechanics.subscribe(m=>l(8,f=m))}),Qe(()=>{u&&u(),_&&_(),h&&h()});const V=m=>{t.addComponent(m.new().defaultOpen()),l(0,n=""),k("save"),Re()};function b(m){n=m,l(0,n)}const S=m=>V(m.component),g=(m,d)=>{d.key==="Enter"&&V(m.component)},$=m=>V(m.component),O=(m,d)=>{d.key==="Enter"&&V(m.component)},L=m=>V(m.component),Z=(m,d)=>{d.key==="Enter"&&V(m.component)},v=()=>Re,E=m=>{m.key==="Enter"&&Re()};return i.$$set=m=>{"data"in m&&l(5,t=m.data)},i.$$.update=()=>{i.$$.dirty[0]&449&&(l(1,a=Object.keys(o).filter(m=>o[m].name.toLowerCase().includes(n.toLowerCase())).sort((m,d)=>(o[m].component.new().isDeprecated?0:-1)-(o[d].component.new().isDeprecated?0:-1)).map(m=>o[m])),l(2,c=Object.keys(s).filter(m=>s[m].name.toLowerCase().includes(n.toLowerCase())).sort((m,d)=>(s[m].component.new().isDeprecated?0:-1)-(s[d].component.new().isDeprecated?0:-1)).map(m=>s[m])),l(3,r=Object.keys(f).filter(m=>f[m].name.toLowerCase().includes(n.toLowerCase())).sort((m,d)=>(f[m].component.new().isDeprecated?0:-1)-(f[d].component.new().isDeprecated?0:-1)).map(m=>f[m])))},[n,a,c,r,V,t,o,s,f,b,S,g,$,O,L,Z,v,E]}class dl extends Ee{constructor(e){super(),ye(this,e,_l,ul,Ce,{data:5},null,[-1,-1])}}function dt(i,e,l){const t=i.slice();return t[6]=e[l],t[7]=e,t[8]=l,t}function pt(i){let e,l=i[0].description+"",t;return{c(){e=C("div"),t=j(l),this.h()},l(n){e=D(n,"DIV",{class:!0});var o=M(e);t=K(o,l),o.forEach(p),this.h()},h(){q(e,"class","modal-desc svelte-yfnt3o")},m(n,o){w(n,e,o),y(e,t)},p(n,o){o&1&&l!==(l=n[0].description+"")&&x(t,l)},d(n){n&&p(e)}}}function mt(i){let e,l,t,n;function o(a){i[2](a,i[6])}var s=i[6].component;function f(a){let c={name:a[6].name,tooltip:(a[6].key?"["+a[6].key+"] ":"")+a[6].tooltip,multiple:a[6].multiple};return a[6].data!==void 0&&(c.data=a[6].data),{props:c}}return s&&(e=Oe(s,f(i)),ee.push(()=>ie(e,"data",o)),e.$on("save",i[3])),{c(){e&&G(e.$$.fragment),t=ae()},l(a){e&&X(e.$$.fragment,a),t=ae()},m(a,c){e&&Q(e,a,c),w(a,t,c),n=!0},p(a,c){i=a;const r={};if(c&1&&(r.name=i[6].name),c&1&&(r.tooltip=(i[6].key?"["+i[6].key+"] ":"")+i[6].tooltip),c&1&&(r.multiple=i[6].multiple),!l&&c&1&&(l=!0,r.data=i[6].data,re(()=>l=!1)),c&1&&s!==(s=i[6].component)){if(e){te();const u=e;H(u.$$.fragment,1,0,()=>{U(u,1)}),le()}s?(e=Oe(s,f(i)),ee.push(()=>ie(e,"data",o)),e.$on("save",i[3]),G(e.$$.fragment),P(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}else s&&e.$set(r)},i(a){n||(e&&P(e.$$.fragment,a),n=!0)},o(a){e&&H(e.$$.fragment,a),n=!1},d(a){a&&p(t),e&&U(e,a)}}}function ht(i){let e=i[6].meetsRequirements(i[0]),l,t,n=e&&mt(i);return{c(){n&&n.c(),l=ae()},l(o){n&&n.l(o),l=ae()},m(o,s){n&&n.m(o,s),w(o,l,s),t=!0},p(o,s){s&1&&(e=o[6].meetsRequirements(o[0])),e?n?(n.p(o,s),s&1&&P(n,1)):(n=mt(o),n.c(),P(n,1),n.m(l.parentNode,l)):n&&(te(),H(n,1,1,()=>{n=null}),le())},i(o){t||(P(n),t=!0)},o(o){H(n),t=!1},d(o){n&&n.d(o),o&&p(l)}}}function pl(i){let e,l,t=i[0].name+"",n,o,s,f,a,c,r,u,_=i[0].description&&pt(i),h=i[0].preview,k=[];for(let b=0;b<h.length;b+=1)k[b]=ht(dt(i,h,b));const V=b=>H(k[b],1,1,()=>{k[b]=null});return{c(){e=C("h2"),l=C("span"),n=j(t),o=j(" - Preview"),s=N(),_&&_.c(),f=N(),a=C("hr"),c=N(),r=C("div");for(let b=0;b<k.length;b+=1)k[b].c();this.h()},l(b){e=D(b,"H2",{class:!0});var S=M(e);l=D(S,"SPAN",{class:!0});var g=M(l);n=K(g,t),o=K(g," - Preview"),g.forEach(p),S.forEach(p),s=T(b),_&&_.l(b),f=T(b),a=D(b,"HR",{}),c=T(b),r=D(b,"DIV",{class:!0});var $=M(r);for(let O=0;O<k.length;O+=1)k[O].l($);$.forEach(p),this.h()},h(){q(l,"class","svelte-yfnt3o"),q(e,"class","svelte-yfnt3o"),ne(e,"deprecated",i[0].isDeprecated),q(r,"class","component-entry svelte-yfnt3o")},m(b,S){w(b,e,S),y(e,l),y(l,n),y(l,o),w(b,s,S),_&&_.m(b,S),w(b,f,S),w(b,a,S),w(b,c,S),w(b,r,S);for(let g=0;g<k.length;g+=1)k[g]&&k[g].m(r,null);u=!0},p(b,S){if((!u||S&1)&&t!==(t=b[0].name+"")&&x(n,t),(!u||S&1)&&ne(e,"deprecated",b[0].isDeprecated),b[0].description?_?_.p(b,S):(_=pt(b),_.c(),_.m(f.parentNode,f)):_&&(_.d(1),_=null),S&1){h=b[0].preview;let g;for(g=0;g<h.length;g+=1){const $=dt(b,h,g);k[g]?(k[g].p($,S),P(k[g],1)):(k[g]=ht($),k[g].c(),P(k[g],1),k[g].m(r,null))}for(te(),g=h.length;g<k.length;g+=1)V(g);le()}},i(b){if(!u){for(let S=0;S<h.length;S+=1)P(k[S]);u=!0}},o(b){k=k.filter(Boolean);for(let S=0;S<k.length;S+=1)H(k[S]);u=!1},d(b){b&&p(e),b&&p(s),_&&_.d(b),b&&p(f),b&&p(a),b&&p(c),b&&p(r),Ie(k,b)}}}function ml(i){let e,l,t;function n(s){i[4](s)}let o={width:"70%",$$slots:{default:[pl]},$$scope:{ctx:i}};return i[1]!==void 0&&(o.open=i[1]),e=new je({props:o}),ee.push(()=>ie(e,"open",n)),e.$on("close",i[5]),{c(){G(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,f){Q(e,s,f),t=!0},p(s,[f]){const a={};f&513&&(a.$$scope={dirty:f,ctx:s}),!l&&f&2&&(l=!0,a.open=s[1],re(()=>l=!1)),e.$set(a)},i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){H(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function hl(i,e,l){let{data:t=void 0}=e,n=!0;function o(c,r){i.$$.not_equal(r.data,c)&&(r.data=c,l(0,t))}function s(c){me.call(this,i,c)}function f(c){n=c,l(1,n)}function a(c){me.call(this,i,c)}return i.$$set=c=>{"data"in c&&l(0,t=c.data)},i.$$.update=()=>{i.$$.dirty&3&&n&&t&&t.preview.filter(c=>c.dataSource).forEach(c=>c.init())},[t,n,o,s,f,a]}class gl extends Ee{constructor(e){super(),ye(this,e,hl,ml,Ce,{data:0})}}function gt(i,e,l){const t=i.slice();return t[39]=e[l],t[40]=e,t[41]=l,t}function vl(i){let e,l,t;return{c(){e=C("span"),l=j("expand_less"),this.h()},l(n){e=D(n,"SPAN",{class:!0});var o=M(e);l=K(o,"expand_less"),o.forEach(p),this.h()},h(){q(e,"class","material-symbols-rounded svelte-1yqmc80")},m(n,o){w(n,e,o),y(e,l)},i(n){n&&(t||De(()=>{t=Vt(e,i[18],{duration:400}),t.start()}))},o:Ye,d(n){n&&p(e)}}}function kl(i){let e,l,t;return{c(){e=C("span"),l=j("expand_more"),this.h()},l(n){e=D(n,"SPAN",{class:!0});var o=M(e);l=K(o,"expand_more"),o.forEach(p),this.h()},h(){q(e,"class","material-symbols-rounded svelte-1yqmc80")},m(n,o){w(n,e,o),y(e,l)},i(n){n&&(t||De(()=>{t=Vt(e,i[18],{duration:400}),t.start()}))},o:Ye,d(n){n&&p(e)}}}function bl(i){let e=i[1].name+"",l;return{c(){l=j(e)},l(t){l=K(t,e)},m(t,n){w(t,l,n)},p(t,n){n[0]&2&&e!==(e=t[1].name+"")&&x(l,e)},d(t){t&&p(l)}}}function $l(i){let e,l=i[1].name+"",t;return{c(){e=C("s"),t=j(l)},l(n){e=D(n,"S",{});var o=M(e);t=K(o,l),o.forEach(p)},m(n,o){w(n,e,o),y(e,t)},p(n,o){o[0]&2&&l!==(l=n[1].name+"")&&x(t,l)},d(n){n&&p(e)}}}function vt(i){let e,l,t,n,o,s,f,a,c,r,u,_,h=i[1].isParent&&kt(i),k=i[1].preview&&i[1].preview.length>0&&bt(i);n=new Le({props:{title:"Clone",icon:"content_copy",color:"white"}}),n.$on("click",i[23]),s=new Le({props:{title:"Delete",icon:"delete",color:"red"}}),s.$on("click",i[26]);const V=[El,wl],b=[];function S(g,$){return g[4].length===0?0:1}return c=S(i),r=b[c]=V[c](i),{c(){e=C("div"),h&&h.c(),l=N(),k&&k.c(),t=N(),G(n.$$.fragment),o=N(),G(s.$$.fragment),f=N(),a=C("div"),r.c(),this.h()},l(g){e=D(g,"DIV",{class:!0});var $=M(e);h&&h.l($),l=T($),k&&k.l($),t=T($),X(n.$$.fragment,$),o=T($),X(s.$$.fragment,$),$.forEach(p),f=T(g),a=D(g,"DIV",{class:!0});var O=M(a);r.l(O),O.forEach(p),this.h()},h(){q(e,"class","controls svelte-1yqmc80"),q(a,"class","children svelte-1yqmc80")},m(g,$){w(g,e,$),h&&h.m(e,null),y(e,l),k&&k.m(e,null),y(e,t),Q(n,e,null),y(e,o),Q(s,e,null),w(g,f,$),w(g,a,$),b[c].m(a,null),_=!0},p(g,$){g[1].isParent?h?(h.p(g,$),$[0]&2&&P(h,1)):(h=kt(g),h.c(),P(h,1),h.m(e,l)):h&&(te(),H(h,1,1,()=>{h=null}),le()),g[1].preview&&g[1].preview.length>0?k?(k.p(g,$),$[0]&2&&P(k,1)):(k=bt(g),k.c(),P(k,1),k.m(e,t)):k&&(te(),H(k,1,1,()=>{k=null}),le());let O=c;c=S(g),c===O?b[c].p(g,$):(te(),H(b[O],1,1,()=>{b[O]=null}),le(),r=b[c],r?r.p(g,$):(r=b[c]=V[c](g),r.c()),P(r,1),r.m(a,null))},i(g){_||(P(h),P(k),P(n.$$.fragment,g),P(s.$$.fragment,g),P(r),g&&De(()=>{_&&(u||(u=_e(a,fe,{},!0)),u.run(1))}),_=!0)},o(g){H(h),H(k),H(n.$$.fragment,g),H(s.$$.fragment,g),H(r),g&&(u||(u=_e(a,fe,{},!1)),u.run(0)),_=!1},d(g){g&&p(e),h&&h.d(),k&&k.d(),U(n),U(s),g&&p(f),g&&p(a),b[c].d(),g&&u&&u.end()}}}function kt(i){let e,l;return e=new Le({props:{title:"Add Component",icon:"add",color:i[17]()}}),e.$on("click",i[14]),{c(){G(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,n){Q(e,t,n),l=!0},p:Ye,i(t){l||(P(e.$$.fragment,t),l=!0)},o(t){H(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function bt(i){let e,l;return e=new Le({props:{title:"Preview Settings",icon:"visibility",color:"gray"}}),e.$on("click",i[15]),{c(){G(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,n){Q(e,t,n),l=!0},p:Ye,i(t){l||(P(e.$$.fragment,t),l=!0)},o(t){H(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function wl(i){let e,l=[],t=new Map,n,o=i[4];const s=f=>f[39].id;for(let f=0;f<o.length;f+=1){let a=gt(i,o,f),c=s(a);t.set(c,l[f]=$t(c,a))}return{c(){e=C("div");for(let f=0;f<l.length;f+=1)l[f].c();this.h()},l(f){e=D(f,"DIV",{class:!0});var a=M(e);for(let c=0;c<l.length;c+=1)l[c].l(a);a.forEach(p),this.h()},h(){q(e,"class","child-wrapper")},m(f,a){w(f,e,a);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);i[32](e),n=!0},p(f,a){a[0]&4194321&&(o=f[4],te(),l=Pt(l,a,s,1,f,o,t,e,Mt,$t,null,gt),le())},i(f){if(!n){for(let a=0;a<o.length;a+=1)P(l[a]);n=!0}},o(f){for(let a=0;a<l.length;a+=1)H(l[a]);n=!1},d(f){f&&p(e);for(let a=0;a<l.length;a+=1)l[a].d();i[32](null)}}}function El(i){let e,l,t=i[1].isParent&&(i[6]||i[7])&&wt(i);return{c(){t&&t.c(),e=ae()},l(n){t&&t.l(n),e=ae()},m(n,o){t&&t.m(n,o),w(n,e,o),l=!0},p(n,o){n[1].isParent&&(n[6]||n[7])?t?(t.p(n,o),o[0]&194&&P(t,1)):(t=wt(n),t.c(),P(t,1),t.m(e.parentNode,e)):t&&(te(),H(t,1,1,()=>{t=null}),le())},i(n){l||(P(t),l=!0)},o(n){H(t),l=!1},d(n){t&&t.d(n),n&&p(e)}}}function $t(i,e){let l,t,n,o,s,f;function a(r){e[29](r,e[39],e[40],e[41])}let c={skill:e[0]};return e[39]!==void 0&&(c.component=e[39]),t=new qt({props:c}),ee.push(()=>ie(t,"component",a)),t.$on("update",e[30]),t.$on("save",e[31]),t.$on("addskill",e[22]),{key:i,first:null,c(){l=C("span"),G(t.$$.fragment),o=N(),this.h()},l(r){l=D(r,"SPAN",{});var u=M(l);X(t.$$.fragment,u),o=T(u),u.forEach(p),this.h()},h(){this.first=l},m(r,u){w(r,l,u),Q(t,l,null),y(l,o),f=!0},p(r,u){e=r;const _={};u[0]&1&&(_.skill=e[0]),!n&&u[0]&16&&(n=!0,_.component=e[39],re(()=>n=!1)),t.$set(_)},i(r){f||(P(t.$$.fragment,r),r&&De(()=>{f&&(s||(s=_e(l,fe,{},!0)),s.run(1))}),f=!0)},o(r){H(t.$$.fragment,r),r&&(s||(s=_e(l,fe,{},!1)),s.run(0)),f=!1},d(r){r&&p(l),U(t),r&&s&&s.end()}}}function wt(i){let e,l,t,n,o;return{c(){e=C("div"),this.h()},l(s){e=D(s,"DIV",{class:!0}),M(e).forEach(p),this.h()},h(){q(e,"class","filler svelte-1yqmc80"),ne(e,"overChildren",i[7])},m(s,f){w(s,e,f),t=!0,n||(o=[F(e,"dragenter",se(i[27])),F(e,"dragover",se(Fe(Cl))),F(e,"dragleave",i[20]),F(e,"drop",se(Fe(i[28])))],n=!0)},p(s,f){(!t||f[0]&128)&&ne(e,"overChildren",s[7])},i(s){t||(De(()=>{t&&(l||(l=_e(e,fe,{},!0)),l.run(1))}),t=!0)},o(s){l||(l=_e(e,fe,{},!1)),l.run(0),t=!1},d(s){s&&p(e),s&&l&&l.end(),n=!1,he(o)}}}function yl(i){let e,l,t,n,o,s,f,a=i[16](i[11])+"",c,r=i[11]?" ":": ",u,_,h,k,V,b,S;function g(m,d){return m[5]?kl:vl}let $=g(i),O=$(i);function L(m,d){return m[1].isDeprecated?$l:bl}let Z=L(i),v=Z(i),E=!i[5]&&vt(i);return{c(){e=C("div"),l=C("div"),O.c(),t=N(),n=C("div"),o=N(),s=C("div"),f=C("span"),c=j(a),u=j(r),_=N(),v.c(),h=N(),E&&E.c(),this.h()},l(m){e=D(m,"DIV",{class:!0});var d=M(e);l=D(d,"DIV",{draggable:!0,class:!0});var I=M(l);O.l(I),t=T(I),n=D(I,"DIV",{class:!0}),M(n).forEach(p),o=T(I),s=D(I,"DIV",{class:!0});var W=M(s);f=D(W,"SPAN",{class:!0});var z=M(f);c=K(z,a),z.forEach(p),u=K(W,r),_=T(W),v.l(W),W.forEach(p),h=T(I),E&&E.l(I),I.forEach(p),d.forEach(p),this.h()},h(){q(n,"class","corner svelte-1yqmc80"),q(f,"class","svelte-1yqmc80"),q(s,"class","name svelte-1yqmc80"),q(l,"draggable","true"),q(l,"class","comp-body svelte-1yqmc80"),ne(l,"over",i[6]),ne(l,"top",i[8]),ne(l,"bottom",i[9]),ne(l,"dragging",i[10]===i[1]),Be(l,"--comp-color",i[17]()),q(e,"class","wrapper svelte-1yqmc80")},m(m,d){w(m,e,d),y(e,l),O.m(l,null),y(l,t),y(l,n),y(l,o),y(l,s),y(s,f),y(f,c),y(s,u),y(s,_),v.m(s,null),y(l,h),E&&E.m(l,null),i[33](l),V=!0,b||(S=[F(n,"click",se(i[24])),F(n,"keypress",se(i[25])),F(l,"dragstart",se(i[34])),F(l,"dragend",i[35]),F(l,"drop",se(i[21])),F(l,"click",se(i[13])),F(l,"keypress",se(i[36])),F(l,"dragover",se(Fe(i[19]))),F(l,"dragleave",se(i[20]))],b=!0)},p(m,d){$!==($=g(m))&&(O.d(1),O=$(m),O&&(O.c(),P(O,1),O.m(l,t))),(!V||d[0]&2048)&&a!==(a=m[16](m[11])+"")&&x(c,a),(!V||d[0]&2048)&&r!==(r=m[11]?" ":": ")&&x(u,r),Z===(Z=L(m))&&v?v.p(m,d):(v.d(1),v=Z(m),v&&(v.c(),v.m(s,null))),m[5]?E&&(te(),H(E,1,1,()=>{E=null}),le()):E?(E.p(m,d),d[0]&32&&P(E,1)):(E=vt(m),E.c(),P(E,1),E.m(l,null)),(!V||d[0]&64)&&ne(l,"over",m[6]),(!V||d[0]&256)&&ne(l,"top",m[8]),(!V||d[0]&512)&&ne(l,"bottom",m[9]),(!V||d[0]&1026)&&ne(l,"dragging",m[10]===m[1])},i(m){V||(P(O),P(E),k&&k.end(1),V=!0)},o(m){H(E),k=jt(l,fe,{}),V=!1},d(m){m&&p(e),O.d(),v.d(),E&&E.d(),i[33](null),m&&k&&k.end(),b=!1,he(S)}}}const Cl=()=>{};function Dl(i,e,l){let t,n;Ze(i,ke,R=>l(10,t=R)),Ze(i,Wt,R=>l(11,n=R));let{skill:o}=e,{component:s}=e,f,a,c=[];const r=St();let u=!1,_=!1,h=!1,k=!1,V=!1,b;const S=()=>We(nl,s),g=()=>We(dl,s),$=()=>We(gl,s);Ge(()=>{b=s.components.subscribe(R=>l(4,c=R)),s._defaultOpen&&S()}),Qe(()=>{b&&b()});const O=(R=!1)=>{if(R){if(s instanceof Pe)return"🚩";if(s instanceof He)return"⚠";if(s instanceof Ae)return"🎯";if(s instanceof $e)return"🔧"}return s instanceof Pe?"Trigger":s instanceof He?"Condition":s instanceof Ae?"Target":s instanceof $e?"Mechanic":"???"},L=()=>s instanceof Pe?"#0083ef":s instanceof He?"#feac00":s instanceof Ae?"#04af38":s instanceof $e?"#ff3a3a":"orange",Z=(R,{duration:oe})=>({duration:oe,css:de=>`transform: rotate(${180-zt(de)*180}deg);`}),v=R=>{if(s==Me(ke)||(l(6,_=!0),s instanceof Pe))return;const oe=f.getBoundingClientRect();l(8,k=R.clientY<oe.height/2+oe.top),l(9,V=R.clientY>=oe.height/2+oe.top)},E=()=>{l(6,_=!1),l(8,k=!1),l(9,V=!1)},m=R=>{(!R.relatedTarget||!(f!=null&&f.contains(R.relatedTarget))||a!=null&&a.contains(R.relatedTarget))&&E()},d=()=>{let R=Me(ke);r("addskill",{comp:R,relativeTo:s,above:k}),E()},I=R=>{let oe=R.detail.comp,de=R.detail.relativeTo,pe=R.detail.above,Ve=c.indexOf(de);o.removeComponent(oe),s.addComponent(oe,Ve+(pe?0:1)),r("save")},W=()=>{const oe=new At(s.name+"-copy").toYaml(s.name+"-copy",s.toYamlObj()),de=Ht(oe),pe=be.deserializeComponents(de);s.parent?pe.forEach(Ve=>{var Xe;return(Xe=s.parent)==null?void 0:Xe.addComponent(Ve)}):(pe.forEach(Ve=>o.addComponent(Ve)),r("update"))},z=()=>l(5,u=!u),B=R=>{R.key==="Enter"&&l(5,u=!u)},ge=()=>{o.removeComponent(s),r("update")},ce=()=>{l(7,h=!0),l(6,_=!1)},A=()=>{l(7,h=!1);let R=Me(ke);o.removeComponent(R),s.addComponent(R)};function Y(R,oe,de,pe){de[pe]=R,l(4,c)}function J(R){me.call(this,i,R)}function ue(R){me.call(this,i,R)}function qe(R){ee[R?"unshift":"push"](()=>{a=R,l(3,a)})}function Ne(R){ee[R?"unshift":"push"](()=>{f=R,l(2,f)})}const Te=()=>ke.set(s),ve=()=>ke.set(void 0),Se=R=>{R.key};return i.$$set=R=>{"skill"in R&&l(0,o=R.skill),"component"in R&&l(1,s=R.component)},i.$$.update=()=>{i.$$.dirty[0]&2&&s&&r("save")},[o,s,f,a,c,u,_,h,k,V,t,n,r,S,g,$,O,L,Z,v,m,d,I,W,z,B,ge,ce,A,Y,J,ue,qe,Ne,Te,ve,Se]}class qt extends Ee{constructor(e){super(),ye(this,e,Dl,yl,Ce,{skill:0,component:1},null,[-1,-1])}}function Et(i,e,l){const t=i.slice();return t[17]=e[l],t}function yt(i,e,l){const t=i.slice();return t[20]=e[l],t}function Ct(i,e){let l,t,n;return t=new qt({props:{skill:e[1],component:e[20]}}),t.$on("update",e[5]),t.$on("save",e[6]),{key:i,first:null,c(){l=C("div"),G(t.$$.fragment),this.h()},l(o){l=D(o,"DIV",{class:!0});var s=M(l);X(t.$$.fragment,s),s.forEach(p),this.h()},h(){q(l,"class","widget svelte-187gm9u"),this.first=l},m(o,s){w(o,l,s),Q(t,l,null),n=!0},p(o,s){e=o;const f={};s&2&&(f.skill=e[1]),s&2&&(f.component=e[20]),t.$set(f)},i(o){n||(P(t.$$.fragment,o),n=!0)},o(o){H(t.$$.fragment,o),n=!1},d(o){o&&p(l),U(t)}}}function Dt(i){let e,l;return{c(){e=C("div"),l=j("No triggers added yet.")},l(t){e=D(t,"DIV",{});var n=M(e);l=K(n,"No triggers added yet."),n.forEach(p)},m(t,n){w(t,e,n),y(e,l)},d(t){t&&p(e)}}}function Il(i){let e=i[17].name+"",l;return{c(){l=j(e)},l(t){l=K(t,e)},m(t,n){w(t,l,n)},p(t,n){n&8&&e!==(e=t[17].name+"")&&x(l,e)},d(t){t&&p(l)}}}function Sl(i){let e,l=i[17].name+"",t;return{c(){e=C("s"),t=j(l)},l(n){e=D(n,"S",{});var o=M(e);t=K(o,l),o.forEach(p)},m(n,o){w(n,e,o),y(e,t)},p(n,o){o&8&&l!==(l=n[17].name+"")&&x(t,l)},d(n){n&&p(e)}}}function It(i){let e,l,t,n;function o(c,r){return c[17].isDeprecated?Sl:Il}let s=o(i),f=s(i);function a(){return i[11](i[17])}return{c(){e=C("div"),f.c(),l=N(),this.h()},l(c){e=D(c,"DIV",{class:!0});var r=M(e);f.l(r),l=T(r),r.forEach(p),this.h()},h(){q(e,"class","comp-select")},m(c,r){w(c,e,r),f.m(e,null),y(e,l),t||(n=F(e,"click",a),t=!0)},p(c,r){i=c,s===(s=o(i))&&f?f.p(i,r):(f.d(1),f=s(i),f&&(f.c(),f.m(e,l)))},d(c){c&&p(e),f.d(),t=!1,n()}}}function Vl(i){let e,l,t,n,o,s,f,a,c,r,u,_,h,k,V,b,S,g,$,O,L;function Z(d){i[10](d)}let v={placeholder:"Search..."};i[0]!==void 0&&(v.value=i[0]),a=new we({props:v}),ee.push(()=>ie(a,"value",Z));let E=i[3],m=[];for(let d=0;d<E.length;d+=1)m[d]=It(Et(i,E,d));return{c(){e=C("div"),l=C("div"),t=N(),n=C("h2"),o=j("Select New Trigger"),s=N(),f=C("div"),G(a.$$.fragment),r=N(),u=C("hr"),_=N(),h=C("div");for(let d=0;d<m.length;d+=1)m[d].c();k=N(),V=C("hr"),b=N(),S=C("div"),g=j("Cancel"),this.h()},l(d){e=D(d,"DIV",{class:!0});var I=M(e);l=D(I,"DIV",{}),M(l).forEach(p),t=T(I),n=D(I,"H2",{class:!0});var W=M(n);o=K(W,"Select New Trigger"),W.forEach(p),s=T(I),f=D(I,"DIV",{class:!0});var z=M(f);X(a.$$.fragment,z),z.forEach(p),I.forEach(p),r=T(d),u=D(d,"HR",{}),_=T(d),h=D(d,"DIV",{class:!0});var B=M(h);for(let ce=0;ce<m.length;ce+=1)m[ce].l(B);B.forEach(p),k=T(d),V=D(d,"HR",{}),b=T(d),S=D(d,"DIV",{class:!0});var ge=M(S);g=K(ge,"Cancel"),ge.forEach(p),this.h()},h(){q(n,"class","modal-header svelte-187gm9u"),q(f,"class","search-bar"),q(e,"class","modal-header-wrapper"),q(h,"class","triggers"),q(S,"class","cancel")},m(d,I){w(d,e,I),y(e,l),y(e,t),y(e,n),y(n,o),y(e,s),y(e,f),Q(a,f,null),w(d,r,I),w(d,u,I),w(d,_,I),w(d,h,I);for(let W=0;W<m.length;W+=1)m[W]&&m[W].m(h,null);w(d,k,I),w(d,V,I),w(d,b,I),w(d,S,I),y(S,g),$=!0,O||(L=F(S,"click",i[12]),O=!0)},p(d,I){const W={};if(!c&&I&1&&(c=!0,W.value=d[0],re(()=>c=!1)),a.$set(W),I&24){E=d[3];let z;for(z=0;z<E.length;z+=1){const B=Et(d,E,z);m[z]?m[z].p(B,I):(m[z]=It(B),m[z].c(),m[z].m(h,null))}for(;z<m.length;z+=1)m[z].d(1);m.length=E.length}},i(d){$||(P(a.$$.fragment,d),$=!0)},o(d){H(a.$$.fragment,d),$=!1},d(d){d&&p(e),U(a),d&&p(r),d&&p(u),d&&p(_),d&&p(h),Ie(m,d),d&&p(k),d&&p(V),d&&p(b),d&&p(S),O=!1,L()}}}function Pl(i){let e,l,t,n,o=i[1].name+"",s,f,a,c,r,u,_,h,k,V,b,S,g,$=[],O=new Map,L,Z,v,E,m,d,I;document.title=e="ProSkillAPI Dynamic Editor - "+i[1].name;let W=i[1].triggers;const z=A=>A[20].id;for(let A=0;A<W.length;A+=1){let Y=yt(i,W,A),J=z(Y);O.set(J,$[A]=Ct(J,Y))}let B=i[1].triggers.length==0&&Dt();function ge(A){i[13](A)}let ce={$$slots:{default:[Vl]},$$scope:{ctx:i}};return i[2]!==void 0&&(ce.open=i[2]),v=new je({props:ce}),ee.push(()=>ie(v,"open",ge)),{c(){l=N(),t=C("div"),n=C("h2"),s=j(o),f=N(),a=C("a"),c=j("edit"),u=N(),_=C("div"),h=C("span"),k=j("new_label"),V=N(),b=C("hr"),S=N(),g=C("div");for(let A=0;A<$.length;A+=1)$[A].c();L=N(),B&&B.c(),Z=N(),G(v.$$.fragment),this.h()},l(A){Kt("svelte-r5m1v8",document.head).forEach(p),l=T(A),t=D(A,"DIV",{class:!0});var J=M(t);n=D(J,"H2",{class:!0});var ue=M(n);s=K(ue,o),f=T(ue),a=D(ue,"A",{class:!0,title:!0,href:!0});var qe=M(a);c=K(qe,"edit"),qe.forEach(p),u=T(ue),_=D(ue,"DIV",{class:!0,title:!0});var Ne=M(_);h=D(Ne,"SPAN",{class:!0});var Te=M(h);k=K(Te,"new_label"),Te.forEach(p),Ne.forEach(p),ue.forEach(p),V=T(J),b=D(J,"HR",{}),J.forEach(p),S=T(A),g=D(A,"DIV",{class:!0});var ve=M(g);for(let Se=0;Se<$.length;Se+=1)$[Se].l(ve);L=T(ve),B&&B.l(ve),ve.forEach(p),Z=T(A),X(v.$$.fragment,A),this.h()},h(){q(a,"class","material-symbols-rounded edit-skill chip svelte-187gm9u"),q(a,"title","Edit"),q(a,"href",r="/skill/"+i[1].name+"/edit"),q(h,"class","material-symbols-rounded"),q(_,"class","add-trigger chip svelte-187gm9u"),q(_,"title","Add Trigger"),q(n,"class","svelte-187gm9u"),q(t,"class","header svelte-187gm9u"),q(g,"class","container svelte-187gm9u")},m(A,Y){w(A,l,Y),w(A,t,Y),y(t,n),y(n,s),y(n,f),y(n,a),y(a,c),y(n,u),y(n,_),y(_,h),y(h,k),y(t,V),y(t,b),w(A,S,Y),w(A,g,Y);for(let J=0;J<$.length;J+=1)$[J]&&$[J].m(g,null);y(g,L),B&&B.m(g,null),w(A,Z,Y),Q(v,A,Y),m=!0,d||(I=F(_,"click",i[9]),d=!0)},p(A,[Y]){(!m||Y&2)&&e!==(e="ProSkillAPI Dynamic Editor - "+A[1].name)&&(document.title=e),(!m||Y&2)&&o!==(o=A[1].name+"")&&x(s,o),(!m||Y&2&&r!==(r="/skill/"+A[1].name+"/edit"))&&q(a,"href",r),Y&98&&(W=A[1].triggers,te(),$=Pt($,Y,z,1,A,W,O,g,Mt,Ct,L,yt),le()),A[1].triggers.length==0?B||(B=Dt(),B.c(),B.m(g,null)):B&&(B.d(1),B=null);const J={};Y&8388621&&(J.$$scope={dirty:Y,ctx:A}),!E&&Y&4&&(E=!0,J.open=A[2],re(()=>E=!1)),v.$set(J)},i(A){if(!m){for(let Y=0;Y<W.length;Y+=1)P($[Y]);P(v.$$.fragment,A),m=!0}},o(A){for(let Y=0;Y<$.length;Y+=1)H($[Y]);H(v.$$.fragment,A),m=!1},d(A){A&&p(l),A&&p(t),A&&p(S),A&&p(g);for(let Y=0;Y<$.length;Y+=1)$[Y].d();B&&B.d(),A&&p(Z),U(v,A),d=!1,I()}}}function Ml(i,e,l){let{data:t}=e,n,o=!1,s="",f=[],a,c={};Ge(()=>{a=be.triggers.subscribe($=>l(8,c=$));let g;g=be.initialized.subscribe($=>{$&&(g&&g(),u())})}),Qe(()=>{a&&a()});const r=g=>{n.triggers.push(g.detail),u(),setTimeout(()=>l(2,o=!1))},u=()=>{l(1,n.triggers=[...n.triggers],n),_()},_=()=>ze.set([...Me(ze)]),h=()=>l(2,o=!0);function k(g){s=g,l(0,s)}const V=g=>r({detail:g.clone()}),b=()=>l(2,o=!1);function S(g){o=g,l(2,o)}return i.$$set=g=>{"data"in g&&l(7,t=g.data)},i.$$.update=()=>{i.$$.dirty&128&&t&&l(1,n=t.data),i.$$.dirty&257&&l(3,f=Object.keys(c).filter(g=>g.toLowerCase().includes(s.toLowerCase())).sort((g,$)=>(c[g].component.new().isDeprecated?0:-1)-(c[$].component.new().isDeprecated?0:-1)).map(g=>c[g].component.new()))},[s,n,o,f,r,u,_,t,c,h,k,V,b,S]}class Ol extends Ee{constructor(e){super(),ye(this,e,Ml,Pl,Ce,{data:7})}}export{Ol as component,Rl as universal};
